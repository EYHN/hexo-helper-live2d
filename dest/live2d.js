function L2DBaseModel(){this.live2DModel=null,this.modelMatrix=null,this.eyeBlink=null,this.physics=null,this.pose=null,this.debugMode=!1,this.initialized=!1,this.updating=!1,this.alpha=1,this.accAlpha=0,this.lipSync=!1,this.lipSyncValue=0,this.accelX=0,this.accelY=0,this.accelZ=0,this.dragX=0,this.dragY=0,this.startTimeMSec=null,this.mainMotionManager=new L2DMotionManager,this.expressionManager=new L2DMotionManager,this.motions={},this.expressions={},this.isTexLoaded=!1}function L2DExpressionMotion(){AMotion.prototype.constructor.call(this),this.paramList=new Array}function L2DExpressionParam(){this.id="",this.type=-1,this.value=null}function L2DEyeBlink(){this.nextBlinkTime=null,this.stateStartTime=null,this.blinkIntervalMsec=null,this.eyeState=EYE_STATE.STATE_FIRST,this.blinkIntervalMsec=4e3,this.closingMotionMsec=100,this.closedMotionMsec=50,this.openingMotionMsec=150,this.closeIfZero=!0,this.eyeID_L="PARAM_EYE_L_OPEN",this.eyeID_R="PARAM_EYE_R_OPEN"}function L2DMatrix44(){this.tr=new Float32Array(16),this.identity()}function L2DModelMatrix(t,e){L2DMatrix44.prototype.constructor.call(this),this.width=t,this.height=e}function L2DMotionManager(){MotionQueueManager.prototype.constructor.call(this),this.currentPriority=null,this.reservePriority=null,this.super=MotionQueueManager.prototype}function L2DPhysics(){this.physicsList=new Array,this.startTimeMSec=UtSystem.getUserTimeMSec()}function L2DPose(){this.lastTime=0,this.lastModel=null,this.partsGroups=new Array}function L2DPartsParam(t){this.paramIndex=-1,this.partsIndex=-1,this.link=null,this.id=t}function L2DTargetPoint(){this.faceTargetX=0,this.faceTargetY=0,this.faceX=0,this.faceY=0,this.faceVX=0,this.faceVY=0,this.lastTimeSec=0}function L2DViewMatrix(){L2DMatrix44.prototype.constructor.call(this),this.screenLeft=null,this.screenRight=null,this.screenTop=null,this.screenBottom=null,this.maxLeft=null,this.maxRight=null,this.maxTop=null,this.maxBottom=null,this.max=Number.MAX_VALUE,this.min=0}function Live2DFramework(){}function MatrixStack(){}function ModelSettingJson(){this.NAME="name",this.ID="id",this.MODEL="model",this.TEXTURES="textures",this.HIT_AREAS="hit_areas",this.PHYSICS="physics",this.POSE="pose",this.EXPRESSIONS="expressions",this.MOTION_GROUPS="motions",this.SOUND="sound",this.FADE_IN="fade_in",this.FADE_OUT="fade_out",this.LAYOUT="layout",this.INIT_PARAM="init_param",this.INIT_PARTS_VISIBLE="init_parts_visible",this.VALUE="val",this.FILE="file",this.json={}}function PlatformManager(){}function LAppModel(){L2DBaseModel.prototype.constructor.call(this),this.modelHomeDir="",this.modelSetting=null,this.tmpMatrix=[]}function LAppLive2DManager(){this.models=[],this.count=0,this.reloadFlg=!1,Live2D.init(),Live2DFramework.setPlatformManager(new PlatformManager)}function live2dStart(t,e){LAppDefine.MODEL=e,live2dCanveId=t,this.platform=window.navigator.platform.toLowerCase(),this.live2DMgr=new LAppLive2DManager,this.isDrawStart=!1,this.gl=null,this.canvas=null,this.dragMgr=null,this.viewMatrix=null,this.projMatrix=null,this.deviceToScreen=null,this.drag=!1,this.oldLen=0,this.lastMouseX=0,this.lastMouseY=0,this.isModelShown=!1,initL2dCanvas(t),init()}function initL2dCanvas(t){this.canvas=document.getElementById(t),this.canvas.addEventListener&&(window.addEventListener("mousemove",mouseEvent,!0),window.addEventListener("mouseleave",mouseEvent,!0),window.addEventListener("touchstart",touchEvent,!0),window.addEventListener("touchend",touchEvent,!0),window.addEventListener("touchmove",touchEvent,!0))}function init(){var t=this.canvas.width,e=this.canvas.height;this.dragMgr=new L2DTargetPoint;var i=e/t,r=LAppDefine.VIEW_LOGICAL_LEFT,o=LAppDefine.VIEW_LOGICAL_RIGHT,n=-i,s=i;return this.viewMatrix=new L2DViewMatrix,this.viewMatrix.setScreenRect(r,o,n,s),this.viewMatrix.setMaxScreenRect(LAppDefine.VIEW_LOGICAL_MAX_LEFT,LAppDefine.VIEW_LOGICAL_MAX_RIGHT,LAppDefine.VIEW_LOGICAL_MAX_BOTTOM,LAppDefine.VIEW_LOGICAL_MAX_TOP),this.viewMatrix.setMaxScale(LAppDefine.VIEW_MAX_SCALE),this.viewMatrix.setMinScale(LAppDefine.VIEW_MIN_SCALE),this.projMatrix=new L2DMatrix44,this.projMatrix.multScale(1,t/e),this.deviceToScreen=new L2DMatrix44,this.deviceToScreen.multTranslate(-t/2,-e/2),this.deviceToScreen.multScale(2/t,-2/t),this.gl=getWebGLContext(),this.gl?(this.gl.clearColor(0,0,0,0),changeModel(),void startDraw()):void l2dError("Failed to create WebGL context.")}function startDraw(){this.isDrawStart||(this.isDrawStart=!0,function t(){draw();var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;e(t,this.canvas)}())}function draw(){MatrixStack.reset(),MatrixStack.loadIdentity(),this.dragMgr.update(),this.live2DMgr.setDrag(this.dragMgr.getX(),this.dragMgr.getY()),this.gl.clear(this.gl.COLOR_BUFFER_BIT),MatrixStack.multMatrix(projMatrix.getArray()),MatrixStack.multMatrix(viewMatrix.getArray()),MatrixStack.push();for(var t=0;t<this.live2DMgr.numModels();t++){var e=this.live2DMgr.getModel(t);if(null==e)return;e.initialized&&!e.updating&&(e.update(),e.draw(this.gl),this.isModelShown||t!=this.live2DMgr.numModels()-1||(this.isModelShown=!this.isModelShown))}MatrixStack.pop()}function changeModel(){this.isModelShown=!1,this.live2DMgr.reloadFlg=!0,this.live2DMgr.count++,this.live2DMgr.changeModel(this.gl)}function modelScaling(t){var e=thisRef.viewMatrix.isMaxScale(),i=thisRef.viewMatrix.isMinScale();thisRef.viewMatrix.adjustScale(0,0,t),e||thisRef.viewMatrix.isMaxScale()&&thisRef.live2DMgr.maxScaleEvent(),i||thisRef.viewMatrix.isMinScale()&&thisRef.live2DMgr.minScaleEvent()}function modelTurnHead(t){thisRef.drag=!0;var e=document.getElementById(live2dCanveId).getBoundingClientRect(),i=transformScreenX(t.clientX-e.left),r=transformScreenY(t.clientY-e.top),o=transformViewX(t.clientX-e.left),n=transformViewY(t.clientY-e.top);LAppDefine.DEBUG_MOUSE_LOG&&l2dLog("onMouseDown device( x:"+t.clientX+" y:"+t.clientY+" rect.left:"+e.left+" ) view( x:"+o+" y:"+n+")"),thisRef.lastMouseX=i,thisRef.lastMouseY=r,thisRef.dragMgr.setPoint(o,n),thisRef.live2DMgr.tapEvent(o,n)}function followPointer(t){var e=document.getElementById(live2dCanveId).getBoundingClientRect(),i=transformScreenX(t.clientX-e.left),r=transformScreenY(t.clientY-e.top),o=transformViewX(t.clientX-e.left),n=transformViewY(t.clientY-e.top);LAppDefine.DEBUG_MOUSE_LOG&&l2dLog("onMouseMove device( x:"+t.clientX+" y:"+t.clientY+" ) view( x:"+o+" y:"+n+")"),thisRef.drag&&(thisRef.lastMouseX=i,thisRef.lastMouseY=r,thisRef.dragMgr.setPoint(o,n))}function lookFront(){thisRef.drag&&(thisRef.drag=!1),thisRef.dragMgr.setPoint(0,0)}function mouseEvent(t){if("mousewheel"==t.type){if(t.clientX<0||thisRef.canvas.clientWidth<t.clientX||t.clientY<0||thisRef.canvas.clientHeight<t.clientY)return;modelScaling(t.wheelDelta>0?1.1:.9)}else if("mousedown"==t.type){if("button"in t&&0!=t.button)return}else if("mousemove"==t.type)thisRef.drag=!0,followPointer(t);else if("mouseup"==t.type){if("button"in t&&0!=t.button)return}else"mouseout"==t.type?lookFront():"contextmenu"==t.type?changeModel():(t.type="mouseleave")&&lookFront()}function touchEvent(t){var e=t.touches[0];if("touchstart"==t.type)1==t.touches.length&&modelTurnHead(e);else if("touchmove"==t.type){if(followPointer(e),2==t.touches.length){var i=t.touches[0],r=t.touches[1],o=Math.pow(i.pageX-r.pageX,2)+Math.pow(i.pageY-r.pageY,2);modelScaling(thisRef.oldLen-o<0?1.025:.975),thisRef.oldLen=o}}else"touchend"==t.type&&lookFront()}function transformViewX(t){var e=this.deviceToScreen.transformX(t);return viewMatrix.invertTransformX(e)}function transformViewY(t){var e=this.deviceToScreen.transformY(t);return viewMatrix.invertTransformY(e)}function transformScreenX(t){return this.deviceToScreen.transformX(t)}function transformScreenY(t){return this.deviceToScreen.transformY(t)}function getWebGLContext(){for(var t=["webgl","experimental-webgl","webkit-3d","moz-webgl"],e=0;e<t.length;e++)try{var i=this.canvas.getContext(t[e],{premultipliedAlpha:!0});if(i)return i}catch(t){}return null}function l2dLog(t){LAppDefine.DEBUG_LOG&&console.log(t)}function l2dError(t){LAppDefine.DEBUG_LOG&&(l2dLog("<span style='color:red'>"+t+"</span>"),console.error(t))}!function(){function t(){Mt||(this._$Xg=null,this._$Mk=null,this._$sH=null,this._$yd=null,this._$Tk=null,this._$Kg=null)}function e(t){Mt||(this._$Pk=t)}function i(){}function r(){this._$d=null,this._$2g=null}function o(){}function n(){Mt||(this._$8f=null,this._$Yg=null,this._$tH=0,n._$ij++,this._$Yg=new ot(this))}function s(){Mt||(t.prototype.constructor.call(this),this._$sH=null,this._$yd=null,this._$Xg=null,this._$Mk=null,this._$Tk=null,this._$Kg=null)}function _(){Mt||(this._$IH=null,this._$yd=null,this._$VP=!0,this._$Kg=null)}function a(){}function h(){Mt||(this.motions=null,this._$uk=!1,this.motions=new Array)}function $(){this._$L2=null,this._$Vf=!0,this._$ET=!1,this._$pj=-1,this._$km=-1,this._$wR=-1,this._$md=null,this._$md=$._$Xm++}function l(t){Mt||c.prototype.constructor.call(this,t)}function u(t){Mt||c.prototype.constructor.call(this,t)}function p(){Mt||(n.prototype.constructor.call(this),this._$pR=new H)}function f(){Mt||(this._$NH=0,this._$LT=null,this._$XH=null,this._$FR=f._$ym,this._$jd=-1,this._$nj=0,this._$dP=0)}function c(t){Mt||(this.id=t)}function d(){Mt||(this.color=null)}function g(){Mt||(_.prototype.constructor.call(this),this._$Xg=null,this._$92=null)}function y(t){N.prototype.constructor.call(this,t),this._$Fd=_._$5d,this._$9d=null,this._$ld=null}function T(){Mt||(this._$yH=null,this._$uR=null,this._$N2=null,this._$yH=1e3,this._$uR=1e3,this._$N2=1,this._$Q2())}function M(t){Mt||c.prototype.constructor.call(this,t)}function v(){Mt||(this._$tT=null,this._$Sg=null,this._$Qg=null,v._$ij++)}function P(){}function S(){}function A(t){Mt||(this._$H=new Int8Array(8),this._$C2=new DataView(this._$H.buffer),this._$SP=new Int8Array(1e3),this._$vT=0,this._$z2=0,this._$gj=0,this._$DR=new Array,this._$f=t,this._$O=0)}function E(){Mt||(this._$hk=E._$Wm,this._$bf=1,this._$x2=1,this._$ef=1,this._$lT=1,this.culling=!1,this.matrix4x4=new Float32Array(16))}function L(){Mt||(this._$ff=null,this._$Tf=null,this._$Og=null,this._$LT=null)}function D(){}function I(){}function w(){}function x(t){Mt||c.prototype.constructor.call(this,t)}function R(){Mt||(this.x=null,this.y=null)}function O(){Mt||(this.x=null,this.y=null,this.width=null,this.height=null)}function F(){Mt||(this._$zR=null,this._$Oj=null,this._$QR=400,this._$Zg=400,F._$ij++)}function H(){Mt||(E.prototype.constructor.call(this),this._$mk=new Int32Array(H._$Vm),this._$1j=new Array,this.transform=null,this.gl=null,null==H._$tf&&(H._$tf=H._$Ed(256),H._$zg=H._$Ed(256),H._$oR=H._$zk(256)))}function k(){}function N(t){Mt||(this._$u2=null,this._$4H=null,this._$Gg=!1,this._$Vf=!0,this._$u2=t,this.totalScale=1,this._$am=1,this.totalOpacity=1)}function j(){Mt||(this.x=null,this.y=null)}function C(){Mt||(this._$Zj=null,this._$kk=null,this._$_T=null,this._$JR=null,this._$PT=null,this._$2T=null,this._$cd=null,this._$wd=null,this._$xk=null,this._$Kd=null,this._$_T=St.STATE_FIRST,this._$cd=4e3,this._$wd=100,this._$xk=50,this._$Kd=150,this._$JR=!0,this._$PT="PARAM_EYE_L_OPEN",this._$2T="PARAM_EYE_R_OPEN")}function G(){Mt||(this.visible=!0,this._$s2=!1,this._$tT=null,this._$Sg=null,this._$Qg=null,G._$ij++)}function b(t){this._$Ng=null,this._$u2=null,this._$u2=t}function Y(){}function B(){}function U(){Mt||(T.prototype.constructor.call(this),this.motions=new Array,this._$ad=null,this._$ad=U._$xR++,this._$w2=30,this._$7f=0,this._$h=!0,this.loopFadeIn=!0,this._$Vg=-1,_$Q2())}function X(){this._$H=new Float32Array(100),this.size=0}function V(){this._$iH=null,this._$42=null,this._$CH=null}function q(){Mt||(T.prototype.constructor.call(this),this.motions=new Array,this._$Rj=null,this._$ad=q._$xR++,this._$w2=30,this._$7f=0,this._$h=!1,this.loopFadeIn=!0,this._$dd=-1,this._$uH=0)}function W(t,e){return String.fromCharCode(t.getUint8(e))}function X(){this._$H=new Float32Array(100),this.size=0}function V(){this._$iH=null,this._$42=null,this._$CH=null}function z(){}function J(t,e){this.canvas=t,this.context=e,this._$yf=new Array(0,0,t.width,t.height),this._$Bd=1,this._$3H=0,this._$Sd=1,this._$5H=0,this._$6R=-1,this.cacheImages={}}function Q(t){Mt||(this._$u2=null,this._$4H=null,this._$1m=null,this._$am=null,this._$4g=[!1],this._$Ng=null,this._$Vf=!0,this.baseOpacity=1,this._$u2=t)}function K(){Mt||(this._$a=1,this._$q=0,this._$0=0,this._$s=1,this._$I=0,this._$L=0,this._$vP=STATE_IDENTITY,this._$A=_$Wg)}function Z(){Mt||(this.x=null,this.y=null,this.width=null,this.height=null)}function tt(){Mt||(s.prototype.constructor.call(this),this._$TH=-1,this._$y2=0,this._$9R=0,this._$GH=null,this._$YH=null,this._$cH=null,this._$hR=null,this._$6P=null,this._$Bm=null,this.culling=!0,this.gl_cacheImage=null,this.instanceNo=tt._$ij++)}function et(t){Q.prototype.constructor.call(this,t),this._$Fd=s._$5d,this._$xd=null,this._$vd=null}function it(){Mt||(this._$nk=null)}function rt(){Mt||(this._$qT=0,this._$sT=0,this._$c2=1,this._$p2=1,this._$Mf=0,this.reflectX=!1,this.reflectY=!1)}function ot(t){Mt||(this._$6f=!0,this._$UR=-1,this._$MR=0,this._$Wk=new Array(ot._$Pm),this._$_j=new Float32Array(ot._$Pm),this._$zd=new Float32Array(ot._$Pm),this._$Cd=new Float32Array(ot._$Pm),this._$nd=new Float32Array(ot._$Pm),this._$qm=new Float32Array(ot._$Pm),this._$Gm=new Array(ot._$Pm),this._$Sg=new Array,this._$Qg=new Array,this._$cR=null,this._$Oj=new Array,this._$yk=new Array,this._$Fk=new Array,this._$0d=new Array,this._$lm=null,this._$Nm=null,this._$hd=null,this._$hm=new Int16Array(I._$6k),this._$AH=new Float32Array(2*I._$Zd),this._$CP=t,this._$k2=ot._$0H++)}function nt(){this.m=new Array(1,0,0,0,1,0,0,0,1)}function st(){Mt||(n.prototype.constructor.call(this),this.drawParamWebGL=new ht)}function _t(){}function at(){Mt||(this._$ig=null)}function ht(){Mt||(E.prototype.constructor.call(this),this.textures=new Array,this.transform=null,this.gl=null,this.firstDraw=!0,this.anisotropyExt=null,this.maxAnisotropy=0,this._$Vm=32,this._$Xd=!1,this._$tf=null,this._$zg=null,this._$oR=null)}function $t(t,e,i){return null==e&&(e=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,i,t.DYNAMIC_DRAW),e}function lt(t,e,i){return null==e&&(e=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.DYNAMIC_DRAW),e}function ut(){}function pt(){Mt||(_.prototype.constructor.call(this),this._$R=0,this._$V=0,this._$Xg=null,this._$hR=null)}function ft(t){N.prototype.constructor.call(this,t),this._$Fd=_._$5d,this._$xd=null,this._$vd=null}function ct(){Mt||(this.p1=new dt,this.p2=new dt,this._$OR=0,this._$wk=0,this._$Tj=0,this._$8j=0,this._$Im=0,this._$Ek=0,this._$PH=0,this._$Pf=0,this._$bT=new Array,this._$MH=new Array,this.setup(.3,.5,.1))}function dt(){this._$W=1,this.x=0,this.y=0,this.vx=0,this.vy=0,this.ax=0,this.ay=0,this.fx=0,this.fy=0,this._$m2=0,this._$a2=0,this._$aT=0,this._$0T=0}function gt(t,e,i){this._$LT=null,this.scale=null,this._$N2=null,this._$LT=t,this.scale=e,this._$N2=i}function yt(t,e,i,r){gt.prototype.constructor.call(this,e,i,r),this._$eT=null,this._$eT=t}function mt(t,e,i){this._$LT=null,this.scale=null,this._$N2=null,this._$LT=t,this.scale=e,this._$N2=i}function Tt(t,e,i,r){mt.prototype.constructor.call(this,e,i,r),this._$9H=null,this._$9H=t}var Mt=!0;t._$5d=-2,t._$hg=500,t._$Lk=2,t._$Fg=3,t._$Yj=t._$hg,t._$Cj=t._$hg,t._$Rd=function(){return t._$Yj},t._$Hd=function(){return t._$Cj},t.prototype._$O2=function(t){this._$sH=t._$oH(),this._$yd=t._$oH(),this._$Xg=t._$oH(),this._$Mk=t._$BT(),this._$Tk=t._$Ug(),this._$Kg=t._$fk(),this._$8g(this._$Tk)},t.prototype.init=function(t){},t.prototype._$td=function(t,e){if(e._$4g[0]=!1,e._$1m=k._$Aj(t,this._$Xg,e._$4g,this._$Tk),ut._$Am);else if(e._$4g[0])return;e._$am=k._$kd(t,this._$Xg,e._$4g,this._$Kg)},t.prototype._$jk=function(t,e){},t.prototype.getDrawDataID=function(){return this._$sH},t.prototype._$Jj=function(t){this._$sH=t},t.prototype.getOpacity=function(t,e){return e._$am},t.prototype._$pg=function(t,e){return e._$1m},t.prototype._$8g=function(e){for(var i=e.length-1;i>=0;--i){var r=e[i];r<t._$Yj?t._$Yj=r:r>t._$Cj&&(t._$Cj=r)}},t.prototype.getTargetBaseDataID=function(){return this._$yd},t.prototype._$sm=function(t){this._$yd=t},t.prototype._$Sj=function(){return null!=this._$yd&&this._$yd!=l._$jR()},t.prototype.draw=function(t,e,i){},t.prototype.getType=function(){},t.prototype._$cj=function(t,e,i){},e._$qd=-1,e.prototype.toString=function(){return this._$Pk},i._$Fm=0,i._$qf=new Object,i.start=function(t){var e=i._$qf[t];null==e&&(e=new r,e._$d=t,i._$qf[t]=e),e._$2g=a.getSystemTimeMSec()},i.dump=function(t){var e=i._$qf[t];if(null!=e){var r=a.getSystemTimeMSec(),o=r-e._$2g;return console.log(t+" : "+o+"ms"),o}return-1},i.end=function(t){var e=i._$qf[t];if(null!=e){var r=a.getSystemTimeMSec();return r-e._$2g}return-1},i._$bP=function(t,e){console.log("_$bP : "+t+"\n",e)},i._$GP=function(t,e){console.log(t,e)},i._$yT=function(t,e){console.log(t,e),console.log("\n")},i._$DT=function(t,e){for(var i=0;i<e;i++)i%16==0&&i>0?console.log("\n"):i%8==0&&i>0&&console.log("  "),console.log("%02X ",255&t[i]);console.log("\n")},i._$od=function(t,e,i){console.log("%s\n",t);for(var r=e.length,o=0;o<r;++o)console.log("%5d",e[o]),console.log("%s\n",i),console.log(",");console.log("\n")},i._$Ck=function(t){console.log("dump exception : "+t),console.log("stack :: "+t.stack)},o._$2f=function(t){return o._$2f(new _$Y(t))},o._$2f=function(t){if(!t.exists())throw new _$bm(t._$Sk());for(var e,i=t.length(),r=new Int8Array(i),o=new _$rm(new _$Ik(t),8192),n=0;(e=o.read(r,n,i-n))>0;)n+=e;return r},o._$x=function(t){var e=null,i=null;try{e=t instanceof Array?t:new _$rm(t,8192),i=new _$Jm;for(var r,o=1e3,n=new Int8Array(o);(r=e.read(n))>0;)i.write(n,0,r);return i._$fg()}finally{null!=t&&t.close(),null!=i&&(i.flush(),i.close())}},n._$2m=1,n._$im=2,n._$ij=0,n._$Bj=function(t,r){try{if(r instanceof ArrayBuffer&&(r=new DataView(r)),!(r instanceof DataView))throw new e("_$gg#loadModel(b) / b _$3 be DataView or ArrayBuffer");var o,s=new A(r),_=s._$gf(),a=s._$gf(),h=s._$gf();if(109!=_||111!=a||99!=h)throw new e("_$sP _$x _$bP , _$62 _$H2.");if(o=s._$gf(),s._$sd(o),o>Y._$fa){t._$tH|=n._$im;var $=Y._$fa,l="_$sP _$x _$bP , _$o2 _$_ version _$bP ( SDK : "+$+" < _$q2 : "+o+" )@_$gg#loadModel()\n";throw new e(l)}var u=s._$oH();if(o>=Y._$ma){var p=s._$Ef(),f=s._$Ef();if(p!=-30584||f!=-30584)throw t._$tH|=n._$2m,new e("_$sP _$x _$bP , _$2 _$B _$1P.")}t._$Dg(u);var c=t.getModelContext();c.init()}catch(t){i._$Ck(t)}},n.prototype._$Dg=function(t){this._$8f=t},n.prototype.getModelImpl=function(){return null==this._$8f&&(this._$8f=new F,this._$8f._$pH()),this._$8f},n.prototype.getCanvasWidth=function(){return null==this._$8f?0:this._$8f.getCanvasWidth()},n.prototype.getCanvasHeight=function(){return null==this._$8f?0:this._$8f.getCanvasHeight()},n.prototype.getParamFloat=function(t){return"number"!=typeof t&&(t=this._$Yg.getParamIndex(M.getID(t))),this._$Yg.getParamFloat(t)},n.prototype.setParamFloat=function(t,e,i){"number"!=typeof t&&(t=this._$Yg.getParamIndex(M.getID(t))),arguments.length<3&&(i=1),this._$Yg.setParamFloat(t,this._$Yg.getParamFloat(t)*(1-i)+e*i)},n.prototype.addToParamFloat=function(t,e,i){"number"!=typeof t&&(t=this._$Yg.getParamIndex(M.getID(t))),arguments.length<3&&(i=1),this._$Yg.setParamFloat(t,this._$Yg.getParamFloat(t)+e*i)},n.prototype.multParamFloat=function(t,e,i){"number"!=typeof t&&(t=this._$Yg.getParamIndex(M.getID(t))),arguments.length<3&&(i=1),this._$Yg.setParamFloat(t,this._$Yg.getParamFloat(t)*(1+(e-1)*i))},n.prototype.getParamIndex=function(t){return this._$Yg.getParamIndex(M.getID(t))},n.prototype.loadParam=function(){this._$Yg.loadParam()},n.prototype.saveParam=function(){this._$Yg.saveParam()},n.prototype.init=function(){this._$Yg.init()},n.prototype.update=function(){this._$Yg.update()},n.prototype._$Cm=function(){return i._$bP("_$B2 _$Hf _$Cm()"),-1},n.prototype._$wm=function(t){i._$bP("_$B2 _$Hf _$gg#_$wm() \n")},n.prototype._$Dj=function(){},n.prototype.draw=function(){},n.prototype.getModelContext=function(){return this._$Yg},n.prototype._$mj=function(){return this._$tH},n.prototype._$Ha=function(t,e,i,r){var o=-1,n=0,s=this,_=.5,a=.15,h=!0;if(0!=i)if(1==t.length){var $=t[0],l=0!=s.getParamFloat($),u=e[0],p=s.getPartsOpacity(u),f=i/r;l?(p+=f,p>1&&(p=1)):(p-=f,p<0&&(p=0)),s.setPartsOpacity(u,p)}else{for(var c=0;c<t.length;c++){var $=t[c],d=0!=s.getParamFloat($);if(d){if(o>=0)break;o=c;var u=e[c];n=s.getPartsOpacity(u),n+=i/r,n>1&&(n=1)}}o<0&&(console.log("No _$LP _$M2/ _$1 default[%s]",t[0]),o=0,n=1,s.loadParam(),s.setParamFloat(t[o],n),s.saveParam());for(var c=0;c<t.length;c++){var u=e[c];if(o==c)s.setPartsOpacity(u,n);else{var g,y=s.getPartsOpacity(u);if(g=n<_?n*(_-1)/_+1:(1-n)*_/(1-_),h){var m=(1-g)*(1-n);m>a&&(g=1-a/(1-n))}y>g&&(y=g),s.setPartsOpacity(u,y)}}}else for(var c=0;c<t.length;c++){var $=t[c],u=e[c],d=0!=s.getParamFloat($);s.setPartsOpacity(u,d?1:0)}},n.prototype.setPartsOpacity=function(t,e){"number"!=typeof t&&(t=this._$Yg.getPartsDataIndex(u.getID(t))),this._$Yg.setPartsOpacity(t,e)},n.prototype.getPartsDataIndex=function(t){return t instanceof u||(t=u.getID(t)),this._$Yg.getPartsDataIndex(t)},n.prototype.getPartsOpacity=function(t){return"number"!=typeof t&&(t=this._$Yg.getPartsDataIndex(u.getID(t))),t<0?0:this._$Yg.getPartsOpacity(t)},n.prototype.getDrawParam=function(){},n.prototype.getDrawDataIndex=function(t){return this._$Yg.getDrawDataIndex(x.getID(t))},n.prototype.getDrawData=function(t){return this._$Yg.getDrawData(t)},n.prototype.getTransformedPoints=function(t){var e=this._$Yg._$xj(t);return e instanceof et?e.getTransformedPoints():null},n.prototype.getIndexArray=function(t){if(t<0||t>=this._$Yg._$Qg.length)return null;var e=this._$Yg._$Qg[t];return null!=e&&e.getType()==s._$Lk&&e instanceof tt?e.getIndexArray():null},s.prototype=new t,s._$5d=-2,s._$hg=500,s._$Lk=2,s._$Fg=3,s._$Rm=4,s._$Yj=s._$hg,s._$Cj=s._$hg,s._$gk=function(t){for(var e=t.length-1;e>=0;--e){var i=t[e];i<s._$Yj?s._$Yj=i:i>s._$Cj&&(s._$Cj=i)}},s._$Rd=function(){return s._$Yj},s._$Hd=function(){return s._$Cj},s.prototype._$O2=function(t){this._$sH=t._$oH(),this._$yd=t._$oH(),this._$Xg=t._$oH(),this._$Mk=t._$BT(),this._$Tk=t._$Ug(),this._$Kg=t._$fk(),s._$gk(this._$Tk)},s.prototype._$td=function(t,e){if(e._$4g[0]=!1,e._$1m=k._$Aj(t,this._$Xg,e._$4g,this._$Tk),ut._$Am);else if(e._$4g[0])return;e._$am=k._$kd(t,this._$Xg,e._$4g,this._$Kg)},s.prototype._$jk=function(t){},s.prototype.getDrawDataID=function(){return this._$sH},s.prototype._$Jj=function(t){this._$sH=t},s.prototype.getOpacity=function(t,e){return e._$am},s.prototype._$pg=function(t,e){return e._$1m},s.prototype.getTargetBaseDataID=function(){return this._$yd},s.prototype._$sm=function(t){this._$yd=t},s.prototype._$Sj=function(){return null!=this._$yd&&this._$yd!=l._$jR()},s.prototype.getType=function(){},_._$5d=-2,_._$Uj=1,_._$_k=2,_.prototype._$O2=function(t){this._$IH=t._$oH(),this._$yd=t._$oH()},_.prototype.readV2_opacity=function(t){t.getFormatVersion()>=Y.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this._$Kg=t._$fk())},_.prototype.init=function(t){},_.prototype._$td=function(t,e){},_.prototype.interpolateOpacity=function(t,e,i,r){null==this._$Kg?i.setInterpolatedOpacity(1):i.setInterpolatedOpacity(k._$kd(t,e,r,this._$Kg))},_.prototype._$jk=function(t,e){},_.prototype._$ok=function(t,e,i,r,o,n,s){},_.prototype.getType=function(){},_.prototype._$sm=function(t){this._$yd=t},_.prototype._$Qj=function(t){this._$IH=t},_.prototype.getTargetBaseDataID=function(){return this._$yd},_.prototype.getBaseDataID=function(){return this._$IH},_.prototype._$Sj=function(){return null!=this._$yd&&this._$yd!=l._$jR()},a._$lj=0,a._$xg=a._$lj,a._$8R=function(){return!0},a._$rH=function(t){try{for(var e=getTimeMSec();getTimeMSec()-e<t;);}catch(t){t._$Ck()}},a.getUserTimeMSec=function(){return a._$xg==a._$lj?a.getSystemTimeMSec():a._$xg},a.setUserTimeMSec=function(t){a._$xg=t},a.updateUserTimeMSec=function(){return a._$xg=a.getSystemTimeMSec()},a.getTimeMSec=function(){return(new Date).getTime()},a.getSystemTimeMSec=function(){return(new Date).getTime()},a._$6=function(t){},a._$Jf=function(t,e,i,r,o){for(var n=0;n<o;n++)i[r+n]=t[e+n]},h.prototype._$ek=function(){return this.motions},h.prototype.startMotion=function(t,e){for(var r=null,o=this.motions.length,n=0;n<o;++n)r=this.motions[n],null!=r&&(r._$Mg(r._$L2.getFadeOut()),this._$uk&&i._$GP("MotionQueueManager[size:%2d]->startMotion() / start _$D _$S (m%d)\n",o,r._$md));if(null==t)return-1;r=new $,r._$L2=t,this.motions.push(r);var s=r._$md;return this._$uk&&i._$GP("MotionQueueManager[size:%2d]->startMotion() / new _$L2 (m%d)\n",o,s),s},h.prototype.updateParam=function(t){try{for(var e=!1,r=0;r<this.motions.length;r++){var o=this.motions[r];if(null!=o){var n=o._$L2;null!=n?(n.updateParam(t,o),e=!0,o.isFinished()&&(this._$uk&&i._$GP("MotionQueueManager[size:%2d]->updateParam() / _$f2 _$L2 (m%d)\n",this.motions.length-1,o._$md),this.motions.splice(r,1),r--)):(this.motions=this.motions.splice(r,1),r--)}else this.motions.splice(r,1),r--}return e}catch(t){return i._$bP(t),!0}},h.prototype.isFinished=function(t){if(arguments.length>=1){for(var e=0;e<this.motions.length;e++){var i=this.motions[e];if(null!=i&&i._$md==t&&!i.isFinished())return!1}return!0}for(var e=0;e<this.motions.length;e++){var i=this.motions[e];if(null!=i){var r=i._$L2;if(null!=r){if(!i.isFinished())return!1}else this.motions.splice(e,1),e--}else this.motions.splice(e,1),e--}return!0},h.prototype.stopAllMotions=function(){for(var t=0;t<this.motions.length;t++){var e=this.motions[t];if(null!=e){var i=e._$L2;null!=i?(this.motions.splice(t,1),t--):(this.motions.splice(t,1),t--)}else this.motions.splice(t,1),t--}},h.prototype._$Ad=function(t){this._$uk=t},h.prototype._$u=function(){console.log("-- _$C --\n");for(var t=0;t<this.motions.length;t++){var e=this.motions[t],i=e._$L2;console.log("MotionQueueEnt[%d] :: %s\n",this.motions.length,i.toString())}},$._$Xm=0,$.prototype.isFinished=function(){return this._$ET},$.prototype._$Mg=function(t){var e=a.getUserTimeMSec(),i=e+t;(this._$wR<0||i<this._$wR)&&(this._$wR=i)},$.prototype._$cm=function(){return this._$md},l.prototype=new c,l._$uf=null,l._$eH=new Object,l._$jR=function(){return null==l._$uf&&(l._$uf=l.getID("DST_BASE")),l._$uf},l._$ja=function(){l._$eH.clear(),l._$uf=null},l.getID=function(t){var e=l._$eH[t];return null==e&&(e=new l(t),l._$eH[t]=e),e},l.prototype._$Sm=function(){return new l},u.prototype=new c,u._$eH=new Object,u._$ja=function(){u._$eH.clear()},u.getID=function(t){var e=u._$eH[t];return null==e&&(e=new u(t),u._$eH[t]=e),e},u.prototype._$Sm=function(){return new u},p.prototype=new n,p.loadModel=function(t){var e=new p;return n._$Bj(e,t),e},p.loadModel=function(t){var e=new p;return n._$Bj(e,t),e},p._$eR=function(){var t=new p;return t},p._$ud=function(t){var e=new _$Y("../_$_d/_$e2/_$CP/_$_H._$y");if(0==e.exists())throw new _$bm("_$e2 _$_ _$B _$1P :: "+e._$HT());for(var i=["../_$_d/_$e2/_$CP/_$_H.512/_$xH._$Z","../_$_d/_$e2/_$CP/_$_H.512/_$zH._$Z","../_$_d/_$e2/_$CP/_$_H.512/_$hH._$Z","../_$_d/_$e2/_$CP/_$_H.512/_$WH._$Z"],r=p.loadModel(e._$Sk()),o=0;o<i.length;o++){var n=new _$Y(i[o]);if(0==n.exists())throw new _$bm("_$e2 _$_ _$B _$1P :: "+n._$HT());r.setTexture(o,_$oT._$_R(t,n._$Sk()))}return r},p.prototype.setGL=function(t){this._$pR.setGL(t)},p.prototype.setTransform=function(t){this._$pR.setTransform(t)},p.prototype.draw=function(){this._$Yg.draw(this._$pR)},p.prototype._$Dj=function(){this._$pR._$Dj()},p.prototype.setTexture=function(t,e){null==this._$pR&&i._$bP("_$9P for QT _$IP / _$rg() is _$B _$5P!!"),this._$pR.setTexture(t,e)},p.prototype.setTexture=function(t,e){null==this._$pR&&i._$bP("_$9P for QT _$IP / _$rg() is _$B _$5P!!"),this._$pR.setTexture(t,e)},p.prototype._$Cm=function(){return this._$pR._$Cm()},p.prototype._$wm=function(t){this._$pR._$wm(t)},p.prototype.getDrawParam=function(){return this._$pR},f._$ym=-2,f.prototype._$O2=function(t){this._$LT=t._$oH(),this._$NH=t._$BT(),this._$XH=t._$oH()},f.prototype.getParamIndex=function(t){return this._$jd!=t&&(this._$FR=f._$ym),this._$FR},f.prototype._$Hk=function(t,e){this._$FR=t,this._$jd=e},f.prototype.getParamID=function(){return this._$LT},f.prototype._$7H=function(t){this._$LT=t},f.prototype._$tj=function(){return this._$NH},f.prototype._$yj=function(){return this._$XH},f.prototype._$ej=function(t,e){this._$NH=t,this._$XH=e},f.prototype._$Td=function(){return this._$nj},f.prototype._$Ld=function(t){this._$nj=t},f.prototype._$gT=function(){return this._$dP},f.prototype._$VT=function(t){this._$dP=t},c._$Ta=function(){M._$ja(),l._$ja(),x._$ja(),u._$ja()},c.prototype.toString=function(){return this.id},g.prototype=new _,g._$rR=new Float32Array(2),g._$PR=new Float32Array(2),g._$2R=new Float32Array(2),g._$TR=new Float32Array(2),g._$fR=new Float32Array(2),g._$HR=new Float32Array(2),g._$sf=new Array,g.prototype._$pH=function(){this._$Xg=new it,this._$Xg._$pH(),this._$92=new Array},g.prototype.getType=function(){return _._$Uj},g.prototype._$O2=function(t){_.prototype._$O2.call(this,t),this._$Xg=t._$oH(),this._$92=t._$oH(),_.prototype.readV2_opacity.call(this,t)},g.prototype.init=function(t){var e=new y(this);return e._$9d=new rt,this._$Sj()&&(e._$ld=new rt),e},g.prototype._$td=function(t,e){this!=e._$Xf()&&console.log("### assert!! ### ");var i=e;if(this._$Xg._$1d(t)){var r=g._$sf;r[0]=!1;var o=this._$Xg._$6j(t,r);e._$4k(r[0]),this.interpolateOpacity(t,this._$Xg,e,r);var n=t._$zm(),s=t._$fd();if(this._$Xg._$pd(n,s,o),o<=0){var _=this._$92[n[0]];i._$9d.init(_)}else if(1==o){var _=this._$92[n[0]],a=this._$92[n[1]],h=s[0];i._$9d._$qT=_._$qT+(a._$qT-_._$qT)*h,i._$9d._$sT=_._$sT+(a._$sT-_._$sT)*h,i._$9d._$c2=_._$c2+(a._$c2-_._$c2)*h,i._$9d._$p2=_._$p2+(a._$p2-_._$p2)*h,i._$9d._$Mf=_._$Mf+(a._$Mf-_._$Mf)*h}else if(2==o){var _=this._$92[n[0]],a=this._$92[n[1]],$=this._$92[n[2]],l=this._$92[n[3]],h=s[0],u=s[1],p=_._$qT+(a._$qT-_._$qT)*h,f=$._$qT+(l._$qT-$._$qT)*h;i._$9d._$qT=p+(f-p)*u,p=_._$sT+(a._$sT-_._$sT)*h,f=$._$sT+(l._$sT-$._$sT)*h,i._$9d._$sT=p+(f-p)*u,p=_._$c2+(a._$c2-_._$c2)*h,f=$._$c2+(l._$c2-$._$c2)*h,i._$9d._$c2=p+(f-p)*u,p=_._$p2+(a._$p2-_._$p2)*h,f=$._$p2+(l._$p2-$._$p2)*h,i._$9d._$p2=p+(f-p)*u,p=_._$Mf+(a._$Mf-_._$Mf)*h,f=$._$Mf+(l._$Mf-$._$Mf)*h,i._$9d._$Mf=p+(f-p)*u}else if(3==o){var c=this._$92[n[0]],d=this._$92[n[1]],y=this._$92[n[2]],m=this._$92[n[3]],T=this._$92[n[4]],M=this._$92[n[5]],v=this._$92[n[6]],P=this._$92[n[7]],h=s[0],u=s[1],S=s[2],p=c._$qT+(d._$qT-c._$qT)*h,f=y._$qT+(m._$qT-y._$qT)*h,A=T._$qT+(M._$qT-T._$qT)*h,E=v._$qT+(P._$qT-v._$qT)*h;i._$9d._$qT=(1-S)*(p+(f-p)*u)+S*(A+(E-A)*u),p=c._$sT+(d._$sT-c._$sT)*h,f=y._$sT+(m._$sT-y._$sT)*h,A=T._$sT+(M._$sT-T._$sT)*h,E=v._$sT+(P._$sT-v._$sT)*h,i._$9d._$sT=(1-S)*(p+(f-p)*u)+S*(A+(E-A)*u),p=c._$c2+(d._$c2-c._$c2)*h,f=y._$c2+(m._$c2-y._$c2)*h,A=T._$c2+(M._$c2-T._$c2)*h,E=v._$c2+(P._$c2-v._$c2)*h,i._$9d._$c2=(1-S)*(p+(f-p)*u)+S*(A+(E-A)*u),p=c._$p2+(d._$p2-c._$p2)*h,f=y._$p2+(m._$p2-y._$p2)*h,A=T._$p2+(M._$p2-T._$p2)*h,E=v._$p2+(P._$p2-v._$p2)*h,i._$9d._$p2=(1-S)*(p+(f-p)*u)+S*(A+(E-A)*u),p=c._$Mf+(d._$Mf-c._$Mf)*h,f=y._$Mf+(m._$Mf-y._$Mf)*h,A=T._$Mf+(M._$Mf-T._$Mf)*h,E=v._$Mf+(P._$Mf-v._$Mf)*h,i._$9d._$Mf=(1-S)*(p+(f-p)*u)+S*(A+(E-A)*u)}else if(4==o){var L=this._$92[n[0]],D=this._$92[n[1]],I=this._$92[n[2]],w=this._$92[n[3]],x=this._$92[n[4]],R=this._$92[n[5]],O=this._$92[n[6]],F=this._$92[n[7]],H=this._$92[n[8]],k=this._$92[n[9]],N=this._$92[n[10]],j=this._$92[n[11]],C=this._$92[n[12]],G=this._$92[n[13]],b=this._$92[n[14]],Y=this._$92[n[15]],h=s[0],u=s[1],S=s[2],B=s[3],p=L._$qT+(D._$qT-L._$qT)*h,f=I._$qT+(w._$qT-I._$qT)*h,A=x._$qT+(R._$qT-x._$qT)*h,E=O._$qT+(F._$qT-O._$qT)*h,U=H._$qT+(k._$qT-H._$qT)*h,X=N._$qT+(j._$qT-N._$qT)*h,V=C._$qT+(G._$qT-C._$qT)*h,q=b._$qT+(Y._$qT-b._$qT)*h;i._$9d._$qT=(1-B)*((1-S)*(p+(f-p)*u)+S*(A+(E-A)*u))+B*((1-S)*(U+(X-U)*u)+S*(V+(q-V)*u)),p=L._$sT+(D._$sT-L._$sT)*h,f=I._$sT+(w._$sT-I._$sT)*h,A=x._$sT+(R._$sT-x._$sT)*h,
E=O._$sT+(F._$sT-O._$sT)*h,U=H._$sT+(k._$sT-H._$sT)*h,X=N._$sT+(j._$sT-N._$sT)*h,V=C._$sT+(G._$sT-C._$sT)*h,q=b._$sT+(Y._$sT-b._$sT)*h,i._$9d._$sT=(1-B)*((1-S)*(p+(f-p)*u)+S*(A+(E-A)*u))+B*((1-S)*(U+(X-U)*u)+S*(V+(q-V)*u)),p=L._$c2+(D._$c2-L._$c2)*h,f=I._$c2+(w._$c2-I._$c2)*h,A=x._$c2+(R._$c2-x._$c2)*h,E=O._$c2+(F._$c2-O._$c2)*h,U=H._$c2+(k._$c2-H._$c2)*h,X=N._$c2+(j._$c2-N._$c2)*h,V=C._$c2+(G._$c2-C._$c2)*h,q=b._$c2+(Y._$c2-b._$c2)*h,i._$9d._$c2=(1-B)*((1-S)*(p+(f-p)*u)+S*(A+(E-A)*u))+B*((1-S)*(U+(X-U)*u)+S*(V+(q-V)*u)),p=L._$p2+(D._$p2-L._$p2)*h,f=I._$p2+(w._$p2-I._$p2)*h,A=x._$p2+(R._$p2-x._$p2)*h,E=O._$p2+(F._$p2-O._$p2)*h,U=H._$p2+(k._$p2-H._$p2)*h,X=N._$p2+(j._$p2-N._$p2)*h,V=C._$p2+(G._$p2-C._$p2)*h,q=b._$p2+(Y._$p2-b._$p2)*h,i._$9d._$p2=(1-B)*((1-S)*(p+(f-p)*u)+S*(A+(E-A)*u))+B*((1-S)*(U+(X-U)*u)+S*(V+(q-V)*u)),p=L._$Mf+(D._$Mf-L._$Mf)*h,f=I._$Mf+(w._$Mf-I._$Mf)*h,A=x._$Mf+(R._$Mf-x._$Mf)*h,E=O._$Mf+(F._$Mf-O._$Mf)*h,U=H._$Mf+(k._$Mf-H._$Mf)*h,X=N._$Mf+(j._$Mf-N._$Mf)*h,V=C._$Mf+(G._$Mf-C._$Mf)*h,q=b._$Mf+(Y._$Mf-b._$Mf)*h,i._$9d._$Mf=(1-B)*((1-S)*(p+(f-p)*u)+S*(A+(E-A)*u))+B*((1-S)*(U+(X-U)*u)+S*(V+(q-V)*u))}else{for(var W=0|Math.pow(2,o),z=new Float32Array(W),J=0;J<W;J++){for(var Q=J,K=1,Z=0;Z<o;Z++)K*=Q%2==0?1-s[Z]:s[Z],Q/=2;z[J]=K}for(var tt=new Array,et=0;et<W;et++)tt[et]=this._$92[n[et]];for(var it=0,rt=0,ot=0,nt=0,st=0,et=0;et<W;et++)it+=z[et]*tt[et]._$qT,rt+=z[et]*tt[et]._$sT,ot+=z[et]*tt[et]._$c2,nt+=z[et]*tt[et]._$p2,st+=z[et]*tt[et]._$Mf;i._$9d._$qT=it,i._$9d._$sT=rt,i._$9d._$c2=ot,i._$9d._$p2=nt,i._$9d._$Mf=st}var _=this._$92[n[0]];i._$9d.reflectX=_.reflectX,i._$9d.reflectY=_.reflectY}},g.prototype._$jk=function(t,e){this!=e._$Xf()&&console.log("### assert!! ### ");var r=e;if(r._$vg(!0),this._$Sj()){var o=this.getTargetBaseDataID();if(r._$Fd==_._$5d&&(r._$Fd=t.getBaseDataIndex(o)),r._$Fd<0)ut._$mR&&i._$bP("_$T _$2H _$X :: %s",o),r._$vg(!1);else{var n=t.getBaseData(r._$Fd);if(null!=n){var s=t._$Mj(r._$Fd),a=g._$rR;a[0]=r._$9d._$qT,a[1]=r._$9d._$sT;var h=g._$PR;h[0]=0,h[1]=-.1;var $=s._$Xf().getType();$==_._$Uj?h[1]=-10:h[1]=-.1;var l=g._$2R;this._$Gd(t,n,s,a,h,l);var u=D._$Ej(h,l);n._$ok(t,s,a,a,1,0,2),r._$ld._$qT=a[0],r._$ld._$sT=a[1],r._$ld._$c2=r._$9d._$c2,r._$ld._$p2=r._$9d._$p2,r._$ld._$Mf=r._$9d._$Mf-u*D._$tg;var p=s.getTotalScale();r.setTotalScale_notForClient(p*r._$ld._$c2);var f=s.getTotalOpacity();r.setTotalOpacity(f*r.getInterpolatedOpacity()),r._$ld.reflectX=r._$9d.reflectX,r._$ld.reflectY=r._$9d.reflectY,r._$vg(s._$7R())}else r._$vg(!1)}}else r.setTotalScale_notForClient(r._$9d._$c2),r.setTotalOpacity(r.getInterpolatedOpacity())},g.prototype._$ok=function(t,e,i,r,o,n,s){this!=e._$Xf()&&console.log("### assert!! ### ");for(var _,a,h=e,$=null!=h._$ld?h._$ld:h._$9d,l=Math.sin(D._$kg*$._$Mf),u=Math.cos(D._$kg*$._$Mf),p=h.getTotalScale(),f=$.reflectX?-1:1,c=$.reflectY?-1:1,d=u*p*f,g=-l*p*c,y=l*p*f,m=u*p*c,T=$._$qT,M=$._$sT,v=o*s,P=n;P<v;P+=s)_=i[P],a=i[P+1],r[P]=d*_+g*a+T,r[P+1]=y*_+m*a+M},g.prototype._$Gd=function(t,e,i,r,o,n){e!=i._$Xf()&&console.log("### assert!! ### ");var s=g._$TR;g._$TR[0]=r[0],g._$TR[1]=r[1],e._$ok(t,i,s,s,1,0,2);for(var _=g._$fR,a=g._$HR,h=10,$=1,l=0;l<h;l++){if(a[0]=r[0]+$*o[0],a[1]=r[1]+$*o[1],e._$ok(t,i,a,_,1,0,2),_[0]-=s[0],_[1]-=s[1],0!=_[0]||0!=_[1])return n[0]=_[0],void(n[1]=_[1]);if(a[0]=r[0]-$*o[0],a[1]=r[1]-$*o[1],e._$ok(t,i,a,_,1,0,2),_[0]-=s[0],_[1]-=s[1],0!=_[0]||0!=_[1])return _[0]=-_[0],_[0]=-_[0],n[0]=_[0],void(n[1]=_[1]);$*=.1}ut._$mR&&console.log("_$T2 to transform _$gH\n")},y.prototype=new N,T._$Gf=function(t,e,i){var r=t/e,o=i/e,n=o,s=1/3,_=2/3,a=1-(1-o)*(1-o),h=1-(1-n)*(1-n),$=0,l=(1-o)*s*a+(n*_+(1-n)*s)*(1-a),u=(n+(1-n)*_)*h+(o*s+(1-o)*_)*(1-h),p=1,f=p-3*u+3*l-$,c=3*u-6*l+3*$,d=3*l-3*$,g=$;if(r<=0)return 0;if(r>=1)return 1;var y=r,m=y*y,T=y*m,M=f*T+c*m+d*y+g;return M},T.prototype._$Q2=function(){},T.prototype.setFadeIn=function(t){this._$yH=t},T.prototype.setFadeOut=function(t){this._$uR=t},T.prototype._$Wf=function(t){this._$N2=t},T.prototype.getFadeOut=function(){return this._$uR},T.prototype._$if=function(){return this._$uR},T.prototype._$Kf=function(){return this._$N2},T.prototype.getDurationMSec=function(){return-1},T.prototype.getLoopDurationMSec=function(){return-1},T.prototype.updateParam=function(t,e){if(e._$Vf&&!e._$ET){var i=a.getUserTimeMSec();if(e._$pj<0){e._$pj=i,e._$km=i;var r=this.getDurationMSec();e._$wR<0&&(e._$wR=r<=0?-1:e._$pj+r)}var o=this._$N2,n=0==this._$yH?1:S._$dj((i-e._$km)/this._$yH),s=0==this._$uR||e._$wR<0?1:S._$dj((e._$wR-i)/this._$uR);o=o*n*s,0<=o&&o<=1||console.log("### assert!! ### "),this.updateParamExe(t,i,o,e),e._$wR>0&&e._$wR<i&&(e._$ET=!0)}};T.prototype.updateParamExe=function(t,e,i,r){};M.prototype=new c,M._$eH=new Object,M._$ja=function(){M._$eH.clear()},M.getID=function(t){var e=M._$eH[t];return null==e&&(e=new M(t),M._$eH[t]=e),e},M.prototype._$Sm=function(){return new M},v._$ij=0,v.prototype._$Zk=function(){return this._$Sg},v.prototype.getDrawDataList=function(){return this._$Qg},v.prototype._$O2=function(t){this._$tT=t._$oH(),this._$Qg=t._$oH(),this._$Sg=t._$oH()},v.prototype._$Id=function(t){t._$AR(this._$Sg),t._$3R(this._$Qg),this._$Sg=null,this._$Qg=null},P._$lj=0,P.SYSTEM_INFO=null,P.USER_AGENT=navigator.userAgent,P.isIPhone=function(){return P.SYSTEM_INFO||P.setup(),P.SYSTEM_INFO._isIPhone},P.isIOS=function(){return P.SYSTEM_INFO||P.setup(),P.SYSTEM_INFO._isIPhone||P.SYSTEM_INFO._isIPad},P.isAndroid=function(){return P.SYSTEM_INFO||P.setup(),P.SYSTEM_INFO._isAndroid},P.getOSVersion=function(){return P.SYSTEM_INFO||P.setup(),P.SYSTEM_INFO.version},P.getOS=function(){return P.SYSTEM_INFO||P.setup(),P.SYSTEM_INFO._isIPhone||P.SYSTEM_INFO._isIPad?"iOS":P.SYSTEM_INFO._isAndroid?"Android":"_$62 OS"},P.setup=function(){function t(t,e){for(var r=t.substring(e).split(/[ _,;\.]/),o=0,n=0;n<=2&&!isNaN(r[n]);n++){var s=parseInt(r[n]);if(s<0||s>999){i._$bP("err : "+s+" @UtHtml5.setup()"),o=0;break}o+=s*Math.pow(1e3,2-n)}return o}var e,r=P.USER_AGENT,o=P.SYSTEM_INFO={userAgent:r};if((e=r.indexOf("iPhone OS "))>=0)o.os="iPhone",o._isIPhone=!0,o.version=t(r,e+"iPhone OS ".length);else if((e=r.indexOf("iPad"))>=0){if(e=r.indexOf("CPU OS"),e<0)return void i._$bP(" err : "+r+" @UtHtml5.setup()");o.os="iPad",o._isIPad=!0,o.version=t(r,e+"CPU OS ".length)}else(e=r.indexOf("Android"))>=0?(o.os="Android",o._isAndroid=!0,o.version=t(r,e+"Android ".length)):(o.os="-",o.version=-1)},S._$dj=function(t){return t<0?0:t>1?1:.5-.5*Math.cos(t*D.PI_F)};var vt=function(){};vt._$oP=function(t,e,i,r,o,n,s,_,a){var h=s*n-_*o;if(0==h)return null;var $,l=((t-i)*n-(e-r)*o)/h;return $=0!=o?(t-i-l*s)/o:(e-r-l*_)/n,isNaN($)&&($=(t-i-l*s)/o,isNaN($)&&($=(e-r-l*_)/n),isNaN($)&&(console.log("a is NaN @UtVector#_$oP() "),console.log("v1x : "+o),console.log("v1x != 0 ? "+(0!=o)))),null==a?new Array($,l):(a[0]=$,a[1]=l,a)},A.prototype._$qH=function(){var t,i,r,o=this._$gf();if(0==(128&o))return 255&o;if(0==(128&(t=this._$gf())))return(127&o)<<7|127&t;if(0==(128&(i=this._$gf())))return(127&o)<<14|(127&t)<<7|255&i;if(0==(128&(r=this._$gf())))return(127&o)<<21|(127&t)<<14|(127&i)<<7|255&r;throw new e("_$T _$2H  _")},A.prototype.getFormatVersion=function(){return this._$gj},A.prototype._$sd=function(t){this._$gj=t},A.prototype._$ST=function(){return this._$qH()},A.prototype._$KH=function(){return this._$pf(),this._$O+=8,this._$f.getFloat64(this._$O-8)},A.prototype._$_f=function(){return this._$pf(),this._$O+=4,this._$f.getFloat32(this._$O-4)},A.prototype._$BT=function(){return this._$pf(),this._$O+=4,this._$f.getInt32(this._$O-4)},A.prototype._$gf=function(){return this._$pf(),this._$f.getInt8(this._$O++)},A.prototype._$Ef=function(){return this._$pf(),this._$O+=2,this._$f.getInt16(this._$O-2)},A.prototype._$jf=function(){throw this._$pf(),this._$O+=8,new e("_$T _$M read long")},A.prototype._$WR=function(){return this._$pf(),0!=this._$f.getInt8(this._$O++)};var Pt=!0;A.prototype._$kf=function(){this._$pf();var t=this._$ST(),e=null;if(Pt)try{var i=new ArrayBuffer(2*t);e=new Uint16Array(i);for(var r=0;r<t;++r)e[r]=this._$f.getUint8(this._$O++);return String.fromCharCode.apply(null,e)}catch(t){Pt=!1}try{var o=new Array;if(null==e)for(var r=0;r<t;++r)o[r]=this._$f.getUint8(this._$O++);else for(var r=0;r<t;++r)o[r]=e[r];return String.fromCharCode.apply(null,o)}catch(t){console.log("read utf8 / _$df _$T2 !! : "+t)}},A.prototype._$Ug=function(){this._$pf();for(var t=this._$ST(),e=new Int32Array(t),i=0;i<t;i++)e[i]=this._$f.getInt32(this._$O),this._$O+=4;return e},A.prototype._$fk=function(){this._$pf();for(var t=this._$ST(),e=new Float32Array(t),i=0;i<t;i++)e[i]=this._$f.getFloat32(this._$O),this._$O+=4;return e},A.prototype._$Yk=function(){this._$pf();for(var t=this._$ST(),e=new Float64Array(t),i=0;i<t;i++)e[i]=this._$f.getFloat64(this._$O),this._$O+=8;return e},A.prototype._$oH=function(){return this._$Gk(-1)},A.prototype._$Gk=function(t){if(this._$pf(),t<0&&(t=this._$ST()),t==Y._$aH){var i=this._$BT();if(0<=i&&i<this._$DR.length)return this._$DR[i];throw new e("_$mT _$iP @_$K2")}var r=this._$ik(t);return this._$DR.push(r),r},A.prototype._$ik=function(t){if(0==t)return null;if(50==t){var i=this._$kf(),r=x.getID(i);return r}if(51==t){var i=this._$kf(),r=l.getID(i);return r}if(134==t){var i=this._$kf(),r=u.getID(i);return r}if(60==t){var i=this._$kf(),r=M.getID(i);return r}if(t>=48){var o=Y._$ER(t);return null!=o?(o._$O2(this),o):null}switch(t){case 1:return this._$kf();case 10:var n=this._$BT();return new d(n,!0);case 11:return new Z(this._$KH(),this._$KH(),this._$KH(),this._$KH());case 12:return new Z(this._$_f(),this._$_f(),this._$_f(),this._$_f());case 13:return new R(this._$KH(),this._$KH());case 14:return new R(this._$_f(),this._$_f());case 15:for(var s=this._$ST(),r=new Array(s),_=0;_<s;_++)r[_]=this._$oH();return r;case 17:var r=new K(this._$KH(),this._$KH(),this._$KH(),this._$KH(),this._$KH(),this._$KH());return r;case 21:return new O(this._$BT(),this._$BT(),this._$BT(),this._$BT());case 22:return new j(this._$BT(),this._$BT());case 23:throw new Error("_$T _$dR ");case 16:case 25:return this._$Ug();case 26:return this._$Yk();case 27:return this._$fk();case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 18:case 19:case 20:case 24:case 28:throw new e("_$B _$M : _$oH() of 2-9 ,18,19,20,24,28 : "+t);default:throw new e("_$B _$M : _$oH() NO _$P : "+t)}},A.prototype._$FT=function(){return 0==this._$vT?this._$z2=this._$gf():8==this._$vT&&(this._$z2=this._$gf(),this._$vT=0),1==(this._$z2>>7-this._$vT++&1)},A.prototype._$pf=function(){0!=this._$vT&&(this._$vT=0)},E._$Wm=32,E.prototype._$Af=function(){},E.prototype._$1R=function(t,e,i,r,o,n,s){},E.prototype._$Cm=function(){return-1},E.prototype._$wm=function(t){},E.prototype.setBaseColor=function(t,e,i,r){t<0?t=0:t>1&&(t=1),e<0?e=0:e>1&&(e=1),i<0?i=0:i>1&&(i=1),r<0?r=0:r>1&&(r=1),this._$bf=t,this._$x2=e,this._$ef=i,this._$lT=r},E.prototype._$lH=function(t){this.culling=t},E.prototype.setMatrix=function(t){for(var e=0;e<16;e++)this.matrix4x4[e]=t[e]},L.prototype._$O2=function(t){this._$ff=t._$_f(),this._$Tf=t._$_f(),this._$Og=t._$_f(),this._$LT=t._$oH()},L.prototype.getMinValue=function(){return this._$ff},L.prototype.getMaxValue=function(){return this._$Tf},L.prototype.getDefaultValue=function(){return this._$Og},L.prototype.getParamID=function(){return this._$LT},D._$jg=Math.PI/180,D._$kg=Math.PI/180,D._$Lg=180/Math.PI,D._$tg=180/Math.PI,D.PI_F=Math.PI,D._$If=[0,.012368,.024734,.037097,.049454,.061803,.074143,.086471,.098786,.111087,.12337,.135634,.147877,.160098,.172295,.184465,.196606,.208718,.220798,.232844,.244854,.256827,.268761,.280654,.292503,.304308,.316066,.327776,.339436,.351044,.362598,.374097,.385538,.396921,.408243,.419502,.430697,.441826,.452888,.463881,.474802,.485651,.496425,.507124,.517745,.528287,.538748,.549126,.559421,.56963,.579752,.589785,.599728,.609579,.619337,.629,.638567,.648036,.657406,.666676,.675843,.684908,.693867,.70272,.711466,.720103,.72863,.737045,.745348,.753536,.76161,.769566,.777405,.785125,.792725,.800204,.807561,.814793,.821901,.828884,.835739,.842467,.849066,.855535,.861873,.868079,.874153,.880093,.885898,.891567,.897101,.902497,.907754,.912873,.917853,.922692,.92739,.931946,.936359,.940629,.944755,.948737,.952574,.956265,.959809,.963207,.966457,.96956,.972514,.97532,.977976,.980482,.982839,.985045,.987101,.989006,.990759,.992361,.993811,.995109,.996254,.997248,.998088,.998776,.999312,.999694,.999924,1],D._$Ej=function(t,e){var i=Math.atan2(t[1],t[0]),r=Math.atan2(e[1],e[0]);return D._$eg(i,r)},D._$eg=function(t,e){for(var i=t-e;i<-Math.PI;)i+=2*Math.PI;for(;i>Math.PI;)i-=2*Math.PI;return i},D._$E=function(t){return Math.sin(t)},I._$8m=1,I._$6m=2,I._$Pj=0,I._$tR=2,I._$yR=I._$8m,I._$Tm=!0,I._$Zd=5,I._$6k=65,I._$G=1e-4,I._$Of=.001,I._$gm=3,w.prototype._$O2=function(t){},x.prototype=new c,x._$eH=new Object,x._$ja=function(){x._$eH.clear()},x.getID=function(t){var e=x._$eH[t];return null==e&&(e=new x(t),x._$eH[t]=e),e},x.prototype._$Sm=function(){return new x},R.prototype._$0f=function(t,e){this.x=t,this.y=e},R.prototype._$0f=function(t){this.x=t.x,this.y=t.y},O.prototype._$FH=function(){return.5*(this.x+this.x+this.width)},O.prototype._$BH=function(){return.5*(this.y+this.y+this.height)},O.prototype._$hT=function(){return this.x+this.width},O.prototype._$Yf=function(){return this.y+this.height},O.prototype._$JT=function(t,e,i,r){this.x=t,this.y=e,this.width=i,this.height=r},O.prototype._$JT=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},F._$ij=0,F.prototype._$pH=function(){null==this._$zR&&(this._$zR=new at),null==this._$Oj&&(this._$Oj=new Array)},F.prototype.getCanvasWidth=function(){return this._$QR},F.prototype.getCanvasHeight=function(){return this._$Zg},F.prototype._$O2=function(t){this._$zR=t._$oH(),this._$Oj=t._$oH(),this._$QR=t._$BT(),this._$Zg=t._$BT()},F.prototype._$Bg=function(t){this._$Oj.push(t)},F.prototype._$rd=function(){return this._$Oj},F.prototype._$hj=function(){return this._$zR},H.prototype=new E,H._$Vm=32,H._$Xd=!1,H._$tf=null,H._$zg=null,H._$oR=null,H._$Ed=function(t){var e=new Float32Array(t);return e},H._$zk=function(t){var e=new Int16Array(t);return e},H._$Ud=function(t,e){return null==t||t._$7T()<e.length?(t=H._$Ed(2*e.length),t.put(e),t._$Rf(0)):(t.clear(),t.put(e),t._$Rf(0)),t},H._$Kk=function(t,e){return null==t||t._$7T()<e.length?(t=H._$zk(2*e.length),t.put(e),t._$Rf(0)):(t.clear(),t.put(e),t._$Rf(0)),t},H._$0m=function(){return H._$Xd},H._$Qm=function(t){H._$Xd=t},H.prototype.setGL=function(t){this.gl=t},H.prototype.setTransform=function(t){this.transform=t},H.prototype._$Af=function(){},H.prototype._$1R=function(t,e,i,r,o,n,s,_){if(!(n<.01)){var a=this._$1j[t],h=n>.9?ut.EXPAND_W:0;this.gl.drawElements(a,i,r,o,n,h,this.transform,_)}},H.prototype._$Cm=function(){throw new Error("_$Cm")},H.prototype._$wm=function(t){throw new Error("_$wm")},H.prototype._$Dj=function(){for(var t=0;t<this._$mk.length;t++){var e=this._$mk[t];0!=e&&(this.gl._$gd(1,this._$mk,t),this._$mk[t]=0)}},H.prototype.setTexture=function(t,e){this._$mk.length<t+1&&this._$og(t),this._$mk[t]=e},H.prototype.setTexture=function(t,e){this._$mk.length<t+1&&this._$og(t),this._$1j[t]=e},H.prototype._$og=function(t){var e=Math.max(2*this._$mk.length,t+1+10),i=new Int32Array(e);a._$Jf(this._$mk,0,i,0,this._$mk.length),this._$mk=i;var r=new Array;a._$Jf(this._$1j,0,r,0,this._$1j.length),this._$1j=r},k._$Aj=function(t,e,i,r){var o=e._$6j(t,i),n=t._$zm(),s=t._$fd();if(e._$pd(n,s,o),o<=0)return r[n[0]];if(1==o){var _=r[n[0]],a=r[n[1]],h=s[0];return _+(a-_)*h|0}if(2==o){var _=r[n[0]],a=r[n[1]],$=r[n[2]],l=r[n[3]],h=s[0],u=s[1],p=_+(a-_)*h|0,f=$+(l-$)*h|0;return p+(f-p)*u|0}if(3==o){var c=r[n[0]],d=r[n[1]],g=r[n[2]],y=r[n[3]],m=r[n[4]],T=r[n[5]],M=r[n[6]],v=r[n[7]],h=s[0],u=s[1],P=s[2],_=c+(d-c)*h|0,a=g+(y-g)*h|0,$=m+(T-m)*h|0,l=M+(v-M)*h|0,p=_+(a-_)*u|0,f=$+(l-$)*u|0;return p+(f-p)*P|0}if(4==o){var S=r[n[0]],A=r[n[1]],E=r[n[2]],L=r[n[3]],D=r[n[4]],I=r[n[5]],w=r[n[6]],x=r[n[7]],R=r[n[8]],O=r[n[9]],F=r[n[10]],H=r[n[11]],k=r[n[12]],N=r[n[13]],j=r[n[14]],C=r[n[15]],h=s[0],u=s[1],P=s[2],G=s[3],c=S+(A-S)*h|0,d=E+(L-E)*h|0,g=D+(I-D)*h|0,y=w+(x-w)*h|0,m=R+(O-R)*h|0,T=F+(H-F)*h|0,M=k+(N-k)*h|0,v=j+(C-j)*h|0,_=c+(d-c)*u|0,a=g+(y-g)*u|0,$=m+(T-m)*u|0,l=M+(v-M)*u|0,p=_+(a-_)*P|0,f=$+(l-$)*P|0;return p+(f-p)*G|0}for(var b=1<<o,Y=new Float32Array(b),B=0;B<b;B++){for(var U=B,X=1,V=0;V<o;V++)X*=U%2==0?1-s[V]:s[V],U/=2;Y[B]=X}for(var q=new Float32Array(b),W=0;W<b;W++)q[W]=r[n[W]];for(var z=0,W=0;W<b;W++)z+=Y[W]*q[W];return z+.5|0},k._$kd=function(t,e,i,r){var o=e._$6j(t,i),n=t._$zm(),s=t._$fd();if(e._$pd(n,s,o),o<=0)return r[n[0]];if(1==o){var _=r[n[0]],a=r[n[1]],h=s[0];return _+(a-_)*h}if(2==o){var _=r[n[0]],a=r[n[1]],$=r[n[2]],l=r[n[3]],h=s[0],u=s[1];return(1-u)*(_+(a-_)*h)+u*($+(l-$)*h)}if(3==o){var p=r[n[0]],f=r[n[1]],c=r[n[2]],d=r[n[3]],g=r[n[4]],y=r[n[5]],m=r[n[6]],T=r[n[7]],h=s[0],u=s[1],M=s[2];return(1-M)*((1-u)*(p+(f-p)*h)+u*(c+(d-c)*h))+M*((1-u)*(g+(y-g)*h)+u*(m+(T-m)*h))}if(4==o){var v=r[n[0]],P=r[n[1]],S=r[n[2]],A=r[n[3]],E=r[n[4]],L=r[n[5]],D=r[n[6]],I=r[n[7]],w=r[n[8]],x=r[n[9]],R=r[n[10]],O=r[n[11]],F=r[n[12]],H=r[n[13]],k=r[n[14]],N=r[n[15]],h=s[0],u=s[1],M=s[2],j=s[3];return(1-j)*((1-M)*((1-u)*(v+(P-v)*h)+u*(S+(A-S)*h))+M*((1-u)*(E+(L-E)*h)+u*(D+(I-D)*h)))+j*((1-M)*((1-u)*(w+(x-w)*h)+u*(R+(O-R)*h))+M*((1-u)*(F+(H-F)*h)+u*(k+(N-k)*h)))}for(var C=1<<o,G=new Float32Array(C),b=0;b<C;b++){for(var Y=b,B=1,U=0;U<o;U++)B*=Y%2==0?1-s[U]:s[U],Y/=2;G[b]=B}for(var X=new Float32Array(C),V=0;V<C;V++)X[V]=r[n[V]];for(var q=0,V=0;V<C;V++)q+=G[V]*X[V];return q},k._$Nd=function(t,e,i,r,o,n,s,_){var h=e._$6j(t,i),$=t._$zm(),l=t._$fd();e._$pd($,l,h);var u=2*r,p=s;if(h<=0){var f=$[0],c=o[f];if(2==_&&0==s)a._$Jf(c,0,n,0,u);else for(var d=0;d<u;)n[p]=c[d++],n[p+1]=c[d++],p+=_}else if(1==h)for(var c=o[$[0]],g=o[$[1]],y=l[0],m=1-y,d=0;d<u;)n[p]=c[d]*m+g[d]*y,++d,n[p+1]=c[d]*m+g[d]*y,++d,p+=_;else if(2==h)for(var c=o[$[0]],g=o[$[1]],T=o[$[2]],M=o[$[3]],y=l[0],v=l[1],m=1-y,P=1-v,S=P*m,A=P*y,E=v*m,L=v*y,d=0;d<u;)n[p]=S*c[d]+A*g[d]+E*T[d]+L*M[d],++d,n[p+1]=S*c[d]+A*g[d]+E*T[d]+L*M[d],++d,p+=_;else if(3==h)for(var D=o[$[0]],I=o[$[1]],w=o[$[2]],x=o[$[3]],R=o[$[4]],O=o[$[5]],F=o[$[6]],H=o[$[7]],y=l[0],v=l[1],k=l[2],m=1-y,P=1-v,N=1-k,j=N*P*m,C=N*P*y,G=N*v*m,b=N*v*y,Y=k*P*m,B=k*P*y,U=k*v*m,X=k*v*y,d=0;d<u;)n[p]=j*D[d]+C*I[d]+G*w[d]+b*x[d]+Y*R[d]+B*O[d]+U*F[d]+X*H[d],++d,n[p+1]=j*D[d]+C*I[d]+G*w[d]+b*x[d]+Y*R[d]+B*O[d]+U*F[d]+X*H[d],++d,p+=_;else if(4==h)for(var V=o[$[0]],q=o[$[1]],W=o[$[2]],z=o[$[3]],J=o[$[4]],Q=o[$[5]],K=o[$[6]],Z=o[$[7]],tt=o[$[8]],et=o[$[9]],it=o[$[10]],rt=o[$[11]],ot=o[$[12]],nt=o[$[13]],st=o[$[14]],_t=o[$[15]],y=l[0],v=l[1],k=l[2],at=l[3],m=1-y,P=1-v,N=1-k,ht=1-at,$t=ht*N*P*m,lt=ht*N*P*y,ut=ht*N*v*m,pt=ht*N*v*y,ft=ht*k*P*m,ct=ht*k*P*y,dt=ht*k*v*m,gt=ht*k*v*y,yt=at*N*P*m,mt=at*N*P*y,Tt=at*N*v*m,Mt=at*N*v*y,vt=at*k*P*m,Pt=at*k*P*y,St=at*k*v*m,At=at*k*v*y,d=0;d<u;)n[p]=$t*V[d]+lt*q[d]+ut*W[d]+pt*z[d]+ft*J[d]+ct*Q[d]+dt*K[d]+gt*Z[d]+yt*tt[d]+mt*et[d]+Tt*it[d]+Mt*rt[d]+vt*ot[d]+Pt*nt[d]+St*st[d]+At*_t[d],++d,n[p+1]=$t*V[d]+lt*q[d]+ut*W[d]+pt*z[d]+ft*J[d]+ct*Q[d]+dt*K[d]+gt*Z[d]+yt*tt[d]+mt*et[d]+Tt*it[d]+Mt*rt[d]+vt*ot[d]+Pt*nt[d]+St*st[d]+At*_t[d],++d,p+=_;else{for(var Et=1<<h,Lt=new Float32Array(Et),Dt=0;Dt<Et;Dt++){for(var It=Dt,wt=1,xt=0;xt<h;xt++)wt*=It%2==0?1-l[xt]:l[xt],It/=2;Lt[Dt]=wt}for(var Rt=new Float32Array(Et),Ot=0;Ot<Et;Ot++)Rt[Ot]=o[$[Ot]];for(var d=0;d<u;){for(var Ft=0,Ht=0,kt=d+1,Ot=0;Ot<Et;Ot++)Ft+=Lt[Ot]*Rt[Ot][d],Ht+=Lt[Ot]*Rt[Ot][kt];d+=2,n[p]=Ft,n[p+1]=Ht,p+=_}}},N.prototype._$7R=function(){return this._$Vf&&!this._$Gg},N.prototype._$vg=function(t){this._$Vf=t},N.prototype._$Xf=function(){return this._$u2},N.prototype._$bj=function(t){this._$4H=t},N.prototype.getPartsIndex=function(){return this._$4H},N.prototype._$3j=function(){return this._$Gg},N.prototype._$4k=function(t){this._$Gg=t},N.prototype.getTotalScale=function(){return this.totalScale},N.prototype.setTotalScale_notForClient=function(t){this.totalScale=t},N.prototype.getInterpolatedOpacity=function(){return this._$am},N.prototype.setInterpolatedOpacity=function(t){this._$am=t},N.prototype.getTotalOpacity=function(t){return this.totalOpacity},N.prototype.setTotalOpacity=function(t){this.totalOpacity=t},j.prototype._$0f=function(t){this.x=t.x,this.y=t.y},j.prototype._$0f=function(t,e){this.x=t,this.y=e},C.prototype._$fj=function(){var t=a.getUserTimeMSec(),e=Math._$Z2();return t+e*(2*this._$cd-1)},C.prototype._$5R=function(t){this._$cd=t},C.prototype._$6g=function(t,e,i){this._$wd=t,this._$xk=e,this._$Kd=i},C.prototype._$af=function(t){var e,i=a.getUserTimeMSec(),r=0;switch(this._$_T){case STATE_CLOSING:r=(i-this._$kk)/this._$wd,r>=1&&(r=1,this._$_T=St.STATE_CLOSED,this._$kk=i),e=1-r;break;case STATE_CLOSED:r=(i-this._$kk)/this._$xk,r>=1&&(this._$_T=St.STATE_OPENING,this._$kk=i),e=0;break;case STATE_OPENING:r=(i-this._$kk)/this._$Kd,r>=1&&(r=1,this._$_T=St.STATE_INTERVAL,this._$Zj=this._$fj()),e=r;break;case STATE_INTERVAL:this._$Zj<i&&(this._$_T=St.STATE_CLOSING,this._$kk=i),e=1;break;case STATE_FIRST:default:this._$_T=St.STATE_INTERVAL,this._$Zj=this._$fj(),e=1}this._$JR||(e=-e),t.setParamFloat(this._$PT,e),t.setParamFloat(this._$2T,e)};var St=function(){};St.STATE_FIRST="STATE_FIRST",St.STATE_INTERVAL="STATE_INTERVAL",St.STATE_CLOSING="STATE_CLOSING",St.STATE_CLOSED="STATE_CLOSED",St.STATE_OPENING="STATE_OPENING",G._$ij=0,G.prototype._$pH=function(){this._$Sg=new Array,this._$Qg=new Array},G.prototype._$O2=function(t){this._$s2=t._$FT(),this.visible=t._$FT(),this._$tT=t._$oH(),this._$Sg=t._$oH(),this._$Qg=t._$oH()},G.prototype.init=function(t){var e=new b(this);return e.setPartsOpacity(this.isVisible()?1:0),e},G.prototype._$BR=function(t){if(null==this._$Sg)throw new Error("_$Sg _$B _$lR@_$BR");this._$Sg.push(t)},G.prototype._$SR=function(t){if(null==this._$Qg)throw new Error("_$Qg _$B _$lR@_$SR");this._$Qg.push(t)},G.prototype._$AR=function(t){this._$Sg=t},G.prototype._$3R=function(t){this._$Qg=t},G.prototype.isVisible=function(){return this.visible},G.prototype._$5T=function(){return this._$s2},G.prototype._$DH=function(t){this.visible=t},G.prototype._$hf=function(t){this._$s2=t},G.prototype.getBaseData=function(){return this._$Sg},G.prototype.getDrawData=function(){return this._$Qg},G.prototype._$Wj=function(){return this._$tT},G.prototype._$Rk=function(t){this._$tT=t},G.prototype.getPartsID=function(){return this._$tT},G.prototype._$8H=function(t){this._$tT=t},b.prototype=new B,b.prototype.getPartsOpacity=function(){return this._$Ng},b.prototype.setPartsOpacity=function(t){this._$Ng=t},Y._$Ra=6,Y._$ga=7,Y._$ma=8,Y._$aa=9,Y.LIVE2D_FORMAT_VERSION_V2_10_SDK2=10,Y._$fa=Y.LIVE2D_FORMAT_VERSION_V2_10_SDK2,Y._$4m=-2004318072,Y._$v2=0,Y._$iT=23,Y._$aH=33,Y._$5f=function(t){console.log("_$kR :: _$B _$KR _$h2 : %d\n",t)},Y._$ER=function(t){if(t<40)return Y._$5f(t),null;if(t<50)return Y._$5f(t),null;if(t<60)return Y._$5f(t),null;if(t<100)switch(t){case 65:return new pt;case 66:return new it;case 67:return new f;case 68:return new g;case 69:return new rt;case 70:return new tt;default:return Y._$5f(t),null}else if(t<150)switch(t){case 131:return new L;case 133:return new G;case 136:return new F;case 137:return new at;case 142:return new v}return Y._$5f(t),null},U.prototype=new T,U._$Um="VISIBLE:",U._$Qd="LAYOUT:",U._$xR=0,U._$wj=[],U._$Zf=1,U.loadMotion=function(t){var e=new U,i=[0],r=t.length;e._$7f=0;for(var o=0;o<r;++o){var n=255&t[o];if("\n"!=n&&"\r"!=n)if("#"!=n)if("$"!=n){if("a"<=n&&n<="z"||"A"<=n&&n<="Z"||"_"==n){for(var s=o,_=-1;o<r&&(n=255&t[o],"\r"!=n&&"\n"!=n);++o)if("="==n){_=o;break}if(_>=0){var a=new V;_t.startsWith(t,s,U._$Um)?(a._$CH=V._$vm,a._$iH=new String(t,s,_-s)):_t.startsWith(t,s,U._$Qd)?(a._$iH=new String(t,s+7,_-s-7),_t.startsWith(t,s+7,"ANCHOR_X")?a._$CH=V._$3m:_t.startsWith(t,s+7,"ANCHOR_Y")?a._$CH=V._$5m:_t.startsWith(t,s+7,"SCALE_X")?a._$CH=V._$Mm:_t.startsWith(t,s+7,"SCALE_Y")?a._$CH=V._$9m:_t.startsWith(t,s+7,"X")?a._$CH=V._$Lm:_t.startsWith(t,s+7,"Y")&&(a._$CH=V._$tm)):(a._$CH=V._$Od,a._$iH=new String(t,s,_-s)),e.motions.push(a);var h=0;for(U._$wj.clear(),o=_+1;o<r&&(n=255&t[o],"\r"!=n&&"\n"!=n);++o)if(","!=n&&" "!=n&&"\t"!=n){var $=_t._$Tg(t,r,o,i);if(i[0]>0){U._$wj.push($),h++;var l=i[0];if(l<o){console.log("_$o2 _$vP . @Live2DMotion loadMotion()\n");break}o=l}}a._$42=U._$wj._$cT(),h>e._$7f&&(e._$7f=h)}}}else{for(var s=o,_=-1;o<r&&(n=255&t[o],"\r"!=n&&"\n"!=n);++o)if("="==n){_=o;break}var u=!1;if(_>=0)for(_==s+4&&"f"==t[s+1]&&"p"==t[s+2]&&"s"==t[s+3]&&(u=!0),o=_+1;o<r&&(n=255&t[o],"\r"!=n&&"\n"!=n);++o)if(","!=n&&" "!=n&&"\t"!=n){var $=_t._$Tg(t,r,o,i);i[0]>0&&u&&5<$&&$<121&&(e._$w2=$),o=i[0]}for(;o<r&&("\n"!=t[o]&&"\r"!=t[o]);++o);}else for(;o<r&&("\n"!=t[o]&&"\r"!=t[o]);++o);}return e._$Vg=1e3*e._$7f/e._$w2|0,e},U.prototype.getDurationMSec=function(){return this._$Vg},U.prototype.dump=function(){for(var t=0;t<this.motions.length;t++){var e=this.motions[t];console.log("_$LT[%s] [%d]. ",e._$iH,e._$42.length);for(var i=0;i<e._$42.length&&i<10;i++)console.log("%5.2f ,",e._$42[i]);console.log("\n")}},U.prototype.updateParamExe=function(t,e,i,r){for(var o=e-r._$pj,n=o*this._$w2/1e3,s=0|n,_=n-s,a=0;a<this.motions.length;a++){var h=this.motions[a],$=h._$42.length,l=h._$iH;if(h._$CH==V._$vm){var u=h._$42[s>=$?$-1:s];t.setParamFloat(l,u)}else if(V._$Lm<=h._$CH&&h._$CH<=V._$9m);else{var p=t.getParamFloat(l),f=h._$42[s>=$?$-1:s],c=h._$42[s+1>=$?$-1:s+1],d=f+(c-f)*_,g=p+(d-p)*i;t.setParamFloat(l,g)}}s>=this._$7f&&(this._$h?(r._$pj=e,this.loopFadeIn&&(r._$km=e)):r._$ET=!0)},U.prototype.isLoop=function(){return this._$h},U.prototype.setLoop=function(t){this._$h=t},U.prototype.isLoopFadeIn=function(){return this.loopFadeIn},U.prototype.setLoopFadeIn=function(t){this.loopFadeIn=t},X.prototype.clear=function(){this.size=0},X.prototype.add=function(t){if(this._$H.length<=this.size){var e=new Float32Array(2*this.size);a._$Jf(this._$H,0,e,0,this.size),this._$H=e}this._$H[this.size++]=t},X.prototype._$cT=function(){var t=new Float32Array(this.size);return a._$Jf(this._$H,0,t,0,this.size),t},V._$Od=0,V._$vm=1,V._$Lm=100,V._$tm=101,V._$3m=102,V._$5m=103,V._$Mm=104,V._$9m=105,q.prototype=new T,q._$Um="VISIBLE:",q._$Qd="LAYOUT:",q.MTN_PREFIX_FADEIN="FADEIN:",q.MTN_PREFIX_FADEOUT="FADEOUT:",q._$xR=0,q._$Zf=1,q.loadMotion=function(t){var e=o._$x(t),i=q.loadMotion(e);return i},q.loadMotion=function(t){t instanceof ArrayBuffer&&(t=new DataView(t));var e=new q,i=[0],r=t.byteLength;e._$7f=0;for(var o=0;o<r;++o){var n=W(t,o),s=n.charCodeAt(0);if("\n"!=n&&"\r"!=n)if("#"!=n)if("$"!=n){if(97<=s&&s<=122||65<=s&&s<=90||"_"==n){for(var _=o,a=-1;o<r&&(n=W(t,o),"\r"!=n&&"\n"!=n);++o)if("="==n){a=o;break}if(a>=0){var h=new V;_t.startsWith(t,_,q._$Um)?(h._$CH=V._$vm,h._$iH=_t.createString(t,_,a-_)):_t.startsWith(t,_,q._$Qd)?(h._$iH=_t.createString(t,_+7,a-_-7),_t.startsWith(t,_+7,"ANCHOR_X")?h._$CH=V._$3m:_t.startsWith(t,_+7,"ANCHOR_Y")?h._$CH=V._$5m:_t.startsWith(t,_+7,"SCALE_X")?h._$CH=V._$Mm:_t.startsWith(t,_+7,"SCALE_Y")?h._$CH=V._$9m:_t.startsWith(t,_+7,"X")?h._$CH=V._$Lm:_t.startsWith(t,_+7,"Y")&&(h._$CH=V._$tm)):(h._$CH=V._$Od,h._$iH=_t.createString(t,_,a-_)),e.motions.push(h);var $=0,l=[];for(o=a+1;o<r&&(n=W(t,o),"\r"!=n&&"\n"!=n);++o)if(","!=n&&" "!=n&&"\t"!=n){var u=_t._$Tg(t,r,o,i);if(i[0]>0){l.push(u),$++;var p=i[0];if(p<o){console.log("_$o2 _$vP . @Live2DMotion loadMotion()\n");break}o=p-1}}h._$42=new Float32Array(l),$>e._$7f&&(e._$7f=$)}}}else{for(var _=o,a=-1;o<r&&(n=W(t,o),"\r"!=n&&"\n"!=n);++o)if("="==n){a=o;break}var f=!1;if(a>=0)for(a==_+4&&"f"==W(t,_+1)&&"p"==W(t,_+2)&&"s"==W(t,_+3)&&(f=!0),o=a+1;o<r&&(n=W(t,o),"\r"!=n&&"\n"!=n);++o)if(","!=n&&" "!=n&&"\t"!=n){var u=_t._$Tg(t,r,o,i);i[0]>0&&f&&5<u&&u<121&&(e._$w2=u),o=i[0]}for(;o<r&&("\n"!=W(t,o)&&"\r"!=W(t,o));++o);}else for(;o<r&&("\n"!=W(t,o)&&"\r"!=W(t,o));++o);}return e._$dd=1e3*e._$7f/e._$w2|0,e},q.prototype.getDurationMSec=function(){return this._$h?-1:this._$dd},q.prototype.getLoopDurationMSec=function(){return this._$dd},q.prototype.dump=function(){for(var t=0;t<this.motions.length;t++){var e=this.motions[t];console.log("_$LT[%s] [%d]. ",e._$iH,e._$42.length);for(var i=0;i<e._$42.length&&i<10;i++)console.log("%5.2f ,",e._$42[i]);console.log("\n")}},q.prototype.updateParamExe=function(t,e,i,r){for(var o=e-r._$pj,n=o*this._$w2/1e3,s=0|n,_=n-s,a=0;a<this.motions.length;a++){var h=this.motions[a],$=h._$42.length,l=h._$iH;if(h._$CH==V._$vm){var u=h._$42[s>=$?$-1:s];t.setParamFloat(l,u)}else if(V._$Lm<=h._$CH&&h._$CH<=V._$9m);else{var p,f=t.getParamIndex(l),c=t.getModelContext(),d=c.getParamMax(f),g=c.getParamMin(f),y=.4,m=y*(d-g),T=c.getParamFloat(f),M=h._$42[s>=$?$-1:s],v=h._$42[s+1>=$?$-1:s+1];p=M<v&&v-M>m||M>v&&M-v>m?M:M+(v-M)*_;var P=T+(p-T)*i;t.setParamFloat(l,P)}}s>=this._$7f&&(this._$h?(r._$pj=e,this.loopFadeIn&&(r._$km=e)):r._$ET=!0),this._$uH=i},q.prototype.isLoop=function(){return this._$h},q.prototype.setLoop=function(t){this._$h=t},q.prototype._$g2=function(){return this._$w2},q.prototype._$12=function(t){this._$w2=t},q.prototype.isLoopFadeIn=function(){return this.loopFadeIn},q.prototype.setLoopFadeIn=function(t){this.loopFadeIn=t},X.prototype.clear=function(){this.size=0},X.prototype.add=function(t){if(this._$H.length<=this.size){var e=new Float32Array(2*this.size);a._$Jf(this._$H,0,e,0,this.size),this._$H=e}this._$H[this.size++]=t},X.prototype._$cT=function(){var t=new Float32Array(this.size);return a._$Jf(this._$H,0,t,0,this.size),t},V._$Od=0,V._$vm=1,V._$Lm=100,V._$tm=101,V._$3m=102,V._$5m=103,V._$Mm=104,V._$9m=105,z.prototype._$LH=function(t,e,i){for(var r=0;r<i;r++){for(var o=0;o<e;o++){var n=2*(o+r*e);console.log("(% 7.3f , % 7.3f) , ",t[n],t[n+1])}console.log("\n")}console.log("\n")},J.tr=new nt,J._$Y2=new nt,J._$fP=new Array(0,0),J._$HP=new Array(0,0),J._$c=new Array(0,0),J.prototype._$bH=function(t,e,i,r){this._$yf=new Array(t,e,i,r)},J.prototype._$kT=function(){this.context.save();var t=this._$yf;null!=t&&(this.context.beginPath(),this.context._$TP(t[0],t[1],t[2],t[3]),this.context.clip())},J.prototype._$uP=function(){this.context.restore()},J.prototype.drawElements=function(t,e,r,o,n,s,_,a){try{n!=this._$6R&&(this._$6R=n,this.context.globalAlpha=n);for(var h=e.length,$=t.width,l=t.height,u=this.context,p=this._$3H,f=this._$5H,c=this._$Bd,d=this._$Sd,g=J.tr,y=J._$fP,m=J._$HP,T=J._$c,M=0;M<h;M+=3){u.save();var v=e[M],P=e[M+1],S=e[M+2],A=p+c*r[2*v],E=f+d*r[2*v+1],L=p+c*r[2*P],D=f+d*r[2*P+1],I=p+c*r[2*S],w=f+d*r[2*S+1];_&&(_._$Hg(A,E,T),A=T[0],E=T[1],_._$Hg(L,D,T),L=T[0],D=T[1],_._$Hg(I,w,T),I=T[0],w=T[1]);var x=$*o[2*v],R=l-l*o[2*v+1],O=$*o[2*P],F=l-l*o[2*P+1],H=$*o[2*S],k=l-l*o[2*S+1],N=Math.atan2(F-R,O-x),j=Math.atan2(D-E,L-A),C=L-A,G=D-E,b=Math.sqrt(C*C+G*G),Y=O-x,B=F-R,U=Math.sqrt(Y*Y+B*B),X=b/U;vt._$oP(H,k,x,R,O-x,F-R,-(F-R),O-x,y),vt._$oP(I,w,A,E,L-A,D-E,-(D-E),L-A,m);var V=(m[0]-y[0])/y[1],q=Math.min(x,O,H),W=Math.max(x,O,H),z=Math.min(R,F,k),Q=Math.max(R,F,k),K=Math.floor(q),Z=Math.floor(z),tt=Math.ceil(W),et=Math.ceil(Q);g.identity(),g.translate(A,E),g.rotate(j),g.scale(1,m[1]/y[1]),g.shear(V,0),g.scale(X,X),g.rotate(-N),g.translate(-x,-R),g.setContext(u);var it=!0,rt=1.2;if(s||(s=it?rt:0),ut.IGNORE_EXPAND&&(s=0),ut.USE_CACHED_POLYGON_IMAGE){var ot=a._$u2;if(ot.gl_cacheImage=ot.gl_cacheImage||{},!ot.gl_cacheImage[M]){var nt=J.createCanvas(tt-K,et-Z);ut.DEBUG_DATA.LDGL_CANVAS_MB=ut.DEBUG_DATA.LDGL_CANVAS_MB||0,ut.DEBUG_DATA.LDGL_CANVAS_MB+=(tt-K)*(et-Z)*4;var st=nt.getContext("2d");st.translate(-K,-Z),J.clip(st,g,s,b,x,R,O,F,H,k,A,E,L,D,I,w),st.drawImage(t,0,0),ot.gl_cacheImage[M]={cacheCanvas:nt,cacheContext:st}}u.drawImage(ot.gl_cacheImage[M].cacheCanvas,K,Z)}else ut.IGNORE_CLIP||J.clip(u,g,s,b,x,R,O,F,H,k,A,E,L,D,I,w),ut.USE_ADJUST_TRANSLATION&&(q=0,W=$,z=0,Q=l),u.drawImage(t,q,z,W-q,Q-z,q,z,W-q,Q-z);u.restore()}}catch(t){i._$Ck(t)}},J.clip=function(t,e,i,r,o,n,s,_,a,h,$,l,u,p,f,c){i>.02?J.expandClip(t,e,i,r,$,l,u,p,f,c):J.clipWithTransform(t,null,o,n,s,_,a,h)},J.expandClip=function(t,e,i,r,o,n,s,_,a,h){var $=s-o,l=_-n,u=a-o,p=h-n,f=$*p-l*u>0?i:-i,c=-l,d=$,g=a-s,y=h-_,m=-y,T=g,M=Math.sqrt(g*g+y*y),v=-p,P=u,S=Math.sqrt(u*u+p*p),A=o-f*c/r,E=n-f*d/r,L=s-f*c/r,D=_-f*d/r,I=s-f*m/M,w=_-f*T/M,x=a-f*m/M,R=h-f*T/M,O=o+f*v/S,F=n+f*P/S,H=a+f*v/S,k=h+f*P/S,N=J._$Y2,j=e._$Hj(N);
return null!=j&&(J.clipWithTransform(t,N,A,E,L,D,I,w,x,R,H,k,O,F),!0)},J.clipWithTransform=function(t,e,r,o,n,s,_,a){if(arguments.length<7)return void i._$bP("err : @LDGL.clip()");if(!(arguments[1]instanceof nt))return void i._$bP("err : a[0] is _$B LDTransform @LDGL.clip()");var h=J._$c,$=e,l=arguments;if(t.beginPath(),$){$._$Hg(l[2],l[3],h),t.moveTo(h[0],h[1]);for(var u=4;u<l.length;u+=2)$._$Hg(l[u],l[u+1],h),t.lineTo(h[0],h[1])}else{t.moveTo(l[2],l[3]);for(var u=4;u<l.length;u+=2)t.lineTo(l[u],l[u+1])}t.clip()},J.createCanvas=function(t,e){var r=document.createElement("canvas");return r.setAttribute("width",t),r.setAttribute("height",e),r||i._$bP("err : "+r),r},J.dumpValues=function(){for(var t="",e=0;e<arguments.length;e++)t+="["+e+"]= "+arguments[e].toFixed(3)+" , ";console.log(t)},Q.prototype._$5j=function(){return this._$4g[0]},Q.prototype._$7R=function(){return this._$Vf&&!this._$4g[0]},Q.prototype._$Xf=function(){return this._$u2},K._$Ig=-1,K._$Wg=0,K._$vk=1,K.STATE_IDENTITY=0,K._$sk=1,K._$qR=2,K._$sR=4,K.prototype.transform=function(t,e,i){var r,o,n,s,_,h,$=0,l=0;switch(this._$vP){default:return;case K._$sR|K._$qR|K._$sk:for(r=this._$a,o=this._$0,n=this._$I,s=this._$q,_=this._$s,h=this._$L;--i>=0;){var u=t[$++],p=t[$++];e[l++]=r*u+o*p+n,e[l++]=s*u+_*p+h}return;case K._$sR|K._$qR:for(r=this._$a,o=this._$0,s=this._$q,_=this._$s;--i>=0;){var u=t[$++],p=t[$++];e[l++]=r*u+o*p,e[l++]=s*u+_*p}return;case K._$sR|K._$sk:for(o=this._$0,n=this._$I,s=this._$q,h=this._$L;--i>=0;){var u=t[$++];e[l++]=o*t[$++]+n,e[l++]=s*u+h}return;case K._$sR:for(o=this._$0,s=this._$q;--i>=0;){var u=t[$++];e[l++]=o*t[$++],e[l++]=s*u}return;case K._$qR|K._$sk:for(r=this._$a,n=this._$I,_=this._$s,h=this._$L;--i>=0;)e[l++]=r*t[$++]+n,e[l++]=_*t[$++]+h;return;case K._$qR:for(r=this._$a,_=this._$s;--i>=0;)e[l++]=r*t[$++],e[l++]=_*t[$++];return;case K._$sk:for(n=this._$I,h=this._$L;--i>=0;)e[l++]=t[$++]+n,e[l++]=t[$++]+h;return;case K.STATE_IDENTITY:return void(t==e&&$==l||a._$Jf(t,$,e,l,2*i))}},K.prototype.update=function(){0==this._$0&&0==this._$q?1==this._$a&&1==this._$s?0==this._$I&&0==this._$L?(this._$vP=K.STATE_IDENTITY,this._$A=K._$Wg):(this._$vP=K._$sk,this._$A=K._$vk):0==this._$I&&0==this._$L?(this._$vP=K._$qR,this._$A=K._$Ig):(this._$vP=K._$qR|K._$sk,this._$A=K._$Ig):0==this._$a&&0==this._$s?0==this._$I&&0==this._$L?(this._$vP=K._$sR,this._$A=K._$Ig):(this._$vP=K._$sR|K._$sk,this._$A=K._$Ig):0==this._$I&&0==this._$L?(this._$vP=K._$sR|K._$qR,this._$A=K._$Ig):(this._$vP=K._$sR|K._$qR|K._$sk,this._$A=K._$Ig)},K.prototype._$Cf=function(t){this._$4f(t);var e=t[0],i=t[2],r=t[1],o=t[3],n=Math.sqrt(e*e+r*r),s=e*o-i*r;0==n?ut._$mR&&console.log("affine._$Cf() / rt==0"):(t[0]=n,t[1]=s/n,t[2]=(r*o+e*i)/s,t[3]=Math.atan2(r,e))},K.prototype._$vR=function(t,e,i,r){var o=new Float32Array(6),n=new Float32Array(6);t._$Cf(o),e._$Cf(n);var s=new Float32Array(6);s[0]=o[0]+(n[0]-o[0])*i,s[1]=o[1]+(n[1]-o[1])*i,s[2]=o[2]+(n[2]-o[2])*i,s[3]=o[3]+(n[3]-o[3])*i,s[4]=o[4]+(n[4]-o[4])*i,s[5]=o[5]+(n[5]-o[5])*i,r._$xf(s)},K.prototype._$xf=function(t){var e=Math.cos(t[3]),i=Math.sin(t[3]);this._$a=t[0]*e,this._$q=t[0]*i,this._$0=t[1]*(t[2]*e-i),this._$s=t[1]*(t[2]*i+e),this._$I=t[4],this._$L=t[5],this.update()},K.prototype._$4f=function(t){t[0]=this._$a,t[1]=this._$q,t[2]=this._$0,t[3]=this._$s,t[4]=this._$I,t[5]=this._$L},Z.prototype._$FH=function(){return this.x+.5*this.width},Z.prototype._$BH=function(){return this.y+.5*this.height},Z.prototype._$hT=function(){return this.x+this.width},Z.prototype._$Yf=function(){return this.y+this.height},Z.prototype._$JT=function(t,e,i,r){this.x=t,this.y=e,this.width=i,this.height=r},Z.prototype._$JT=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},Z.prototype.contains=function(t,e){return this.x<=this.x&&this.y<=this.y&&this.x<=this.x+this.width&&this.y<=this.y+this.height},tt.prototype=new s,tt._$ij=0,tt._$nm=30,tt._$Km=0,tt._$om=1,tt._$_m=2,tt._$sf=new Array,tt.prototype._$_g=function(t){this._$TH=t},tt.prototype.getTextureNo=function(){return this._$TH},tt.prototype._$AT=function(){return this._$6P},tt.prototype._$0j=function(){return this._$GH},tt.prototype.getNumPoints=function(){return this._$y2},tt.prototype.getType=function(){return s._$Lk},tt.prototype._$cj=function(t,e,i){var r=e,o=null!=r._$vd?r._$vd:r._$xd,n=I._$yR;switch(n){default:case I._$8m:throw new Error("_$T _$dR ");case I._$6m:for(var s=this._$y2-1;s>=0;--s){var _=s*I._$tR;o[_+4]=i}}},tt.prototype._$pH=function(){this._$Xg=new it,this._$Xg._$pH()},tt.prototype._$O2=function(t){s.prototype._$O2.call(this,t),this._$TH=t._$BT(),this._$y2=t._$BT(),this._$9R=t._$BT();var e=t._$oH();this._$cH=new Int16Array(3*this._$9R);for(var i=3*this._$9R-1;i>=0;--i)this._$cH[i]=e[i];if(this._$hR=t._$oH(),this._$6P=t._$oH(),t.getFormatVersion()>=Y._$ma){if(this._$GH=t._$BT(),0!=this._$GH){if(0!=(1&this._$GH)){var r=t._$BT();null==this._$YH&&(this._$YH=new Object),this._$YH._$0k=parseInt(r)}0!=(this._$GH&tt._$nm)?this._$Bm=(this._$GH&tt._$nm)>>1:this._$Bm=tt._$Km,0!=(32&this._$GH)&&(this.culling=!1)}}else this._$GH=0},tt.prototype.init=function(t){var e=new et(this),i=this._$y2*I._$tR,r=this._$Sj();null!=e._$xd&&(e._$xd=null),e._$xd=new Float32Array(i),null!=e._$vd&&(e._$vd=null),e._$vd=r?new Float32Array(i):null;var o=I._$yR;switch(o){default:case I._$8m:if(I._$Tm)for(var n=this._$y2-1;n>=0;--n){var s=n<<1;this._$6P[s+1]=1-this._$6P[s+1]}break;case I._$6m:for(var n=this._$y2-1;n>=0;--n){var s=n<<1,_=n*I._$tR,a=this._$6P[s],h=this._$6P[s+1];e._$xd[_]=a,e._$xd[_+1]=h,e._$xd[_+4]=0,r&&(e._$vd[_]=a,e._$vd[_+1]=h,e._$vd[_+4]=0)}}return e},tt.prototype._$td=function(t,e){var i=e;if(this!=i._$Xf()&&console.log("### assert!! ### "),this._$Xg._$1d(t)&&(s.prototype._$td.call(this,t,i),!i._$4g[0])){var r=tt._$sf;r[0]=!1,k._$Nd(t,this._$Xg,r,this._$y2,this._$hR,i._$xd,I._$Pj,I._$tR)}},tt.prototype._$jk=function(t,e){try{this!=e._$Xf()&&console.log("### assert!! ### ");var r=!1;e._$4g[0]&&(r=!0);var o=e;if(!r&&(s.prototype._$jk.call(this,t),this._$Sj())){var n=this.getTargetBaseDataID();if(o._$Fd==s._$5d&&(o._$Fd=t.getBaseDataIndex(n)),o._$Fd<0)ut._$mR&&i._$bP("_$T _$2H _$X :: %s",n);else{var _=t.getBaseData(o._$Fd),a=t._$Mj(o._$Fd);null==_||a._$3j()?o._$Vf=!1:(_._$ok(t,a,o._$xd,o._$vd,this._$y2,I._$Pj,I._$tR),o._$Vf=!0),o.baseOpacity=a.getTotalOpacity()}}}catch(t){throw t}},tt.prototype.draw=function(t,e,i){if(this!=i._$Xf()&&console.log("### assert!! ### "),!i._$4g[0]){var r=i,o=this._$TH;o<0&&(o=1);var n=this.getOpacity(e,r)*i._$Ng*i.baseOpacity,s=null!=r._$vd?r._$vd:r._$xd;t._$lH(this.culling),t._$1R(o,3*this._$9R,this._$cH,s,this._$6P,n,this._$Bm,r)}},tt.prototype.dump=function(){console.log("  _$7P( %d ) , _$y2( %d ) , _$9R( %d ) \n",this._$TH,this._$y2,this._$9R),console.log("  _$nP _$yP = { ");for(var t=0;t<this._$cH.length;t++)console.log("%5d ,",this._$cH[t]);console.log("\n  _$YP _$S2");for(var t=0;t<this._$hR.length;t++){console.log("\n    _$S2[%d] = ",t);for(var e=this._$hR[t],i=0;i<e.length;i++)console.log("%6.2f, ",e[i])}console.log("\n")},tt.prototype._$aj=function(t){return null==this._$YH?null:this._$YH[t]},tt.prototype.getIndexArray=function(){return this._$cH},et.prototype=new Q,et.prototype.getTransformedPoints=function(){return null!=this._$vd?this._$vd:this._$xd},it.prototype._$pH=function(){this._$nk=new Array},it.prototype._$O2=function(t){this._$nk=t._$oH()},it.prototype._$1d=function(t){if(t._$lg())return!0;for(var e=t._$zj(),i=this._$nk.length-1;i>=0;--i){var r=this._$nk[i].getParamIndex(e);if(r==f._$ym&&(r=t.getParamIndex(this._$nk[i].getParamID())),t._$rk(r))return!0}return!1},it.prototype._$6j=function(t,e){for(var i,r,o=this._$nk.length,n=t._$zj(),s=0,_=0;_<o;_++){var a=this._$nk[_];if(i=a.getParamIndex(n),i==f._$ym&&(i=t.getParamIndex(a.getParamID()),a._$Hk(i,n)),i<0)throw new Exception("err 23242 : "+a.getParamID());var h=i<0?0:t.getParamFloat(i);r=a._$tj();var $,l,u=a._$yj(),p=-1,c=0;if(r<1);else if(1==r)$=u[0],$-I._$G<h&&h<$+I._$G?(p=0,c=0):(p=0,e[0]=!0);else if($=u[0],h<$-I._$G)p=0,e[0]=!0;else if(h<$+I._$G)p=0;else{for(var d=!1,g=1;g<r;++g){if(l=u[g],h<l+I._$G){l-I._$G<h?p=g:(p=g-1,c=(h-$)/(l-$),s++),d=!0;break}$=l}d||(p=r-1,c=0,e[0]=!0)}a._$Ld(p),a._$VT(c)}return s},it.prototype._$pd=function(t,e,i){var r=1<<i;r+1>I._$6k&&console.log("err 23245\n");for(var o=this._$nk.length,n=1,s=1,_=0,a=0;a<r;++a)t[a]=0;for(var h=0;h<o;++h){var $=this._$nk[h];if(0==$._$gT()){var l=$._$Td()*n;if(l<0&&ut._$Sf)throw new Exception("err 23246");for(var a=0;a<r;++a)t[a]+=l}else{for(var l=n*$._$Td(),u=n*($._$Td()+1),a=0;a<r;++a)t[a]+=(a/s|0)%2==0?l:u;e[_++]=$._$gT(),s*=2}n*=$._$tj()}t[r]=65535,e[_]=-1},it.prototype._$vj=function(t,e,i){for(var r=new Float32Array(e),o=0;o<e;++o)r[o]=i[o];var n=new f;n._$7H(t),n._$ej(e,r),this._$nk.push(n)},it.prototype._$Gj=function(t){for(var e=t,i=this._$nk.length,r=0;r<i;++r){var o=this._$nk[r],n=o._$tj(),s=e%o._$tj(),_=o._$yj()[s];console.log("%s[%d]=%7.2f / ",o.getParamID(),s,_),e/=n}console.log("\n")},it.prototype.getParamCount=function(){return this._$nk.length},it.prototype._$pm=function(){return this._$nk},rt.prototype.init=function(t){this._$qT=t._$qT,this._$sT=t._$sT,this._$c2=t._$c2,this._$p2=t._$p2,this._$Mf=t._$Mf,this.reflectX=t.reflectX,this.reflectY=t.reflectY},rt.prototype._$O2=function(t){this._$qT=t._$_f(),this._$sT=t._$_f(),this._$c2=t._$_f(),this._$p2=t._$_f(),this._$Mf=t._$_f(),t.getFormatVersion()>=Y.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this.reflectX=t._$WR(),this.reflectY=t._$WR())},rt.prototype._$u=function(){},ot._$0H=0,ot._$_2=!0,ot._$Nj=-1,ot._$l2=-1,ot._$Jd=!1,ot._$Ag=!0,ot._$ed=-1e6,ot._$bd=1e6,ot._$Pm=32,ot._$u=!1,ot.prototype.getDrawDataIndex=function(t){for(var e=this._$Qg.length-1;e>=0;--e)if(null!=this._$Qg[e]&&this._$Qg[e].getDrawDataID()==t)return e;return-1},ot.prototype.getDrawData=function(t){if(t instanceof x){if(null==this._$cR){this._$cR=new Object;for(var e=this._$Qg.length,i=0;i<e;i++){var r=this._$Qg[i],o=r.getDrawDataID();null!=o&&(this._$cR[o]=r)}}return this._$cR[id]}return t<this._$Qg.length?this._$Qg[t]:null},ot.prototype.release=function(){this._$Sg.clear(),this._$Qg.clear(),this._$Oj.clear(),null!=this._$cR&&this._$cR.clear(),this._$yk.clear(),this._$Fk.clear(),this._$0d.clear()},ot.prototype.init=function(){this._$UR++,this._$Oj.length>0&&this.release();for(var t=this._$CP.getModelImpl(),e=t._$rd(),i=e.length,r=new Array,o=new Array,n=0;n<i;++n){var s=e[n];this._$Oj.push(s),this._$0d.push(s.init(this));for(var _=s.getBaseData(),a=_.length,h=0;h<a;++h)r.push(_[h]);for(var h=0;h<a;++h){var $=_[h].init(this);$._$bj(n),o.push($)}for(var u=s.getDrawData(),p=u.length,h=0;h<p;++h){var f=u[h],c=f.init(this);c._$4H=n,this._$Qg.push(f),this._$Fk.push(c)}}for(var d=r.length,g=l._$jR();;){for(var y=!1,n=0;n<d;++n){var m=r[n];if(null!=m){var T=m.getTargetBaseDataID();(null==T||T==g||this.getBaseDataIndex(T)>=0)&&(this._$Sg.push(m),this._$yk.push(o[n]),r[n]=null,y=!0)}}if(!y)break}var M=t._$hj();if(null!=M){var v=M._$Zm();if(null!=v)for(var P=v.length,n=0;n<P;++n){var S=v[n];null!=S&&this._$2j(S.getParamID(),S.getDefaultValue(),S.getMinValue(),S.getMaxValue())}}this._$6f=!0},ot.prototype.update=function(){ot._$u&&i.start("_$pT");for(var t=this._$_j.length,e=0;e<t;e++)this._$_j[e]!=this._$zd[e]&&(this._$Gm[e]=ot._$Ag,this._$zd[e]=this._$_j[e]);var r=!1,o=this._$Sg.length,n=this._$Qg.length,_=s._$Rd(),a=s._$Hd(),h=a-_+1;(null==this._$lm||this._$lm.length<h)&&(this._$lm=new Int16Array(h),this._$Nm=new Int16Array(h));for(var e=0;e<h;e++)this._$lm[e]=ot._$Nj,this._$Nm[e]=ot._$Nj;(null==this._$hd||this._$hd.length<n)&&(this._$hd=new Int16Array(n));for(var e=0;e<n;e++)this._$hd[e]=ot._$l2;ot._$u&&i.dump("_$pT"),ot._$u&&i.start("_$1T");for(var $=null,l=0;l<o;++l){var u=this._$Sg[l],p=this._$yk[l];try{u._$td(this,p),u._$jk(this,p)}catch(t){null==$&&($=t)}}null!=$&&ot._$_2&&i._$Ck($),ot._$u&&i.dump("_$1T"),ot._$u&&i.start("_$wT");for(var f=null,c=0;c<n;++c){var d=this._$Qg[c],g=this._$Fk[c];try{if(d._$td(this,g),g._$5j())continue;d._$jk(this,g);var y,m=Math.floor(d._$pg(this,g)-_);try{y=this._$Nm[m]}catch(t){console.log("_$bP :: %s / %s \t\t\t\t@@_$qg\n",t.toString(),d.getDrawDataID().toString()),m=Math.floor(d._$pg(this,g)-_);continue}y==ot._$Nj?this._$lm[m]=c:this._$hd[y]=c,this._$Nm[m]=c}catch(t){null==f&&(f=t,ut._$mf(ut._$0a))}}null!=f&&ot._$_2&&i._$Ck(f),ot._$u&&i.dump("_$wT"),ot._$u&&i.start("_$uT");for(var e=this._$Gm.length-1;e>=0;e--)this._$Gm[e]=ot._$Jd;return this._$6f=!1,ot._$u&&i.dump("_$uT"),r},ot.prototype.draw=function(t){if(null==this._$lm)return void i._$bP("call _$CP.update() before _$CP.draw() ");var e=this._$lm.length;t._$Af();for(var r=0;r<e;++r){var o=this._$lm[r];if(o!=ot._$Nj)for(;;){var n=this._$Qg[o],s=this._$Fk[o];if(s._$7R()){var _=s._$4H,a=this._$0d[_];s._$Ng=a.getPartsOpacity(),n.draw(t,this,s)}var h=this._$hd[o];if(h<=o||h==ot._$l2)break;o=h}}},ot.prototype.getParamIndex=function(t){for(var e=this._$Wk.length-1;e>=0;--e)if(this._$Wk[e]==t)return e;return this._$2j(t,0,ot._$ed,ot._$bd)},ot.prototype._$cg=function(t){return this.getBaseDataIndex(t)},ot.prototype.getBaseDataIndex=function(t){for(var e=this._$Sg.length-1;e>=0;--e)if(null!=this._$Sg[e]&&this._$Sg[e].getBaseDataID()==t)return e;return-1},ot.prototype._$1f=function(t,e){var i=new Float32Array(e);return a._$Jf(t,0,i,0,t.length),i},ot.prototype._$2j=function(t,e,i,r){if(this._$MR>=this._$Wk.length){var o=this._$Wk.length,n=new Array(2*o);a._$Jf(this._$Wk,0,n,0,o),this._$Wk=n,this._$_j=this._$1f(this._$_j,2*o),this._$zd=this._$1f(this._$zd,2*o),this._$Cd=this._$1f(this._$Cd,2*o),this._$nd=this._$1f(this._$nd,2*o);var s=new Array;a._$Jf(this._$Gm,0,s,0,o),this._$Gm=s}return this._$Wk[this._$MR]=t,this._$_j[this._$MR]=e,this._$zd[this._$MR]=e,this._$Cd[this._$MR]=i,this._$nd[this._$MR]=r,this._$Gm[this._$MR]=ot._$Ag,this._$MR++},ot.prototype._$AR=function(t,e){this._$Sg[t]=e},ot.prototype.setParamFloat=function(t,e){e<this._$Cd[t]&&(e=this._$Cd[t]),e>this._$nd[t]&&(e=this._$nd[t]),this._$_j[t]=e},ot.prototype.loadParam=function(){var t=this._$_j.length;t>this._$qm.length&&(t=this._$qm.length),a._$Jf(this._$qm,0,this._$_j,0,t)},ot.prototype.saveParam=function(){var t=this._$_j.length;t>this._$qm.length&&(this._$qm=new Float32Array(t)),a._$Jf(this._$_j,0,this._$qm,0,t)},ot.prototype._$zj=function(){return this._$UR},ot.prototype._$lg=function(){return this._$6f},ot.prototype._$rk=function(t){return this._$Gm[t]==ot._$Ag},ot.prototype._$zm=function(){return this._$hm},ot.prototype._$fd=function(){return this._$AH},ot.prototype.getBaseData=function(t){return this._$Sg[t]},ot.prototype.getParamFloat=function(t){return this._$_j[t]};ot.prototype.getParamMax=function(t){return this._$nd[t]};ot.prototype.getParamMin=function(t){return this._$Cd[t]},ot.prototype.setPartsOpacity=function(t,e){var i=this._$0d[t];i.setPartsOpacity(e)},ot.prototype.getPartsOpacity=function(t){var e=this._$0d[t];return e.getPartsOpacity()},ot.prototype.getPartsDataIndex=function(t){for(var e=this._$Oj.length-1;e>=0;--e)if(null!=this._$Oj[e]&&this._$Oj[e]._$Wj()==t)return e;return-1},ot.prototype._$Mj=function(t){return this._$yk[t]},ot.prototype._$xj=function(t){return this._$Fk[t]},ot.prototype._$ck=function(t){return this._$0d[t]},ot.prototype._$Ym=function(t,e){for(var i=this._$lm.length,r=t,o=0;o<i;++o){var n=this._$lm[o];if(n!=ot._$Nj)for(;;){var s=this._$Fk[n];s._$7R()&&(s._$Xf()._$cj(this,s,r),r+=e);var _=this._$hd[n];if(_<=n||_==ot._$l2)break;n=_}}},nt.prototype.setContext=function(t){var e=this.m;t.transform(e[0],e[1],e[3],e[4],e[6],e[7])},nt.prototype.toString=function(){for(var t="LDTransform { ",e=0;e<9;e++)t+=this.m[e].toFixed(2)+" ,";return t+=" }"},nt.prototype.identity=function(){var t=this.m;t[0]=t[4]=t[8]=1,t[1]=t[2]=t[3]=t[5]=t[6]=t[7]=0},nt.prototype._$Hg=function(t,e,i){null==i&&(i=new Array(0,0));var r=this.m;return i[0]=r[0]*t+r[3]*e+r[6],i[1]=r[1]*t+r[4]*e+r[7],i},nt.prototype._$Hj=function(t){t||(t=new nt);var e=this.m,i=e[0],r=e[1],o=e[2],n=e[3],s=e[4],_=e[5],a=e[6],h=e[7],$=e[8],l=i*s*$+r*_*a+o*n*h-i*_*h-o*s*a-r*n*$;if(0==l)return null;var u=1/l;return t.m[0]=u*(s*$-h*_),t.m[1]=u*(h*o-r*$),t.m[2]=u*(r*_-s*o),t.m[3]=u*(a*_-n*$),t.m[4]=u*(i*$-a*o),t.m[5]=u*(n*o-i*_),t.m[6]=u*(n*h-a*s),t.m[7]=u*(a*r-i*h),t.m[8]=u*(i*s-n*r),t},nt.prototype.transform=function(t,e,i){null==i&&(i=new Array(0,0));var r=this.m;return i[0]=r[0]*t+r[3]*e+r[6],i[1]=r[1]*t+r[4]*e+r[7],i},nt.prototype.translate=function(t,e){var i=this.m;i[6]=i[0]*t+i[3]*e+i[6],i[7]=i[1]*t+i[4]*e+i[7],i[8]=i[2]*t+i[5]*e+i[8]},nt.prototype.scale=function(t,e){var i=this.m;i[0]*=t,i[1]*=t,i[2]*=t,i[3]*=e,i[4]*=e,i[5]*=e},nt.prototype.shear=function(t,e){var i=this.m,r=i[0]+i[3]*e,o=i[1]+i[4]*e,n=i[2]+i[5]*e;i[3]=i[0]*t+i[3],i[4]=i[1]*t+i[4],i[5]=i[2]*t+i[5],i[0]=r,i[1]=o,i[2]=n},nt.prototype.rotate=function(t){var e=this.m,i=Math.cos(t),r=Math.sin(t),o=e[0]*i+e[3]*r,n=e[1]*i+e[4]*r,s=e[2]*i+e[5]*r;e[3]=-e[0]*r+e[3]*i,e[4]=-e[1]*r+e[4]*i,e[5]=-e[2]*r+e[5]*i,e[0]=o,e[1]=n,e[2]=s},nt.prototype.concatenate=function(t){var e=this.m,i=t.m,r=e[0]*i[0]+e[3]*i[1]+e[6]*i[2],o=e[1]*i[0]+e[4]*i[1]+e[7]*i[2],n=e[2]*i[0]+e[5]*i[1]+e[8]*i[2],s=e[0]*i[3]+e[3]*i[4]+e[6]*i[5],_=e[1]*i[3]+e[4]*i[4]+e[7]*i[5],a=e[2]*i[3]+e[5]*i[4]+e[8]*i[5],h=e[0]*i[6]+e[3]*i[7]+e[6]*i[8],$=e[1]*i[6]+e[4]*i[7]+e[7]*i[8],l=e[2]*i[6]+e[5]*i[7]+e[8]*i[8];m[0]=r,m[1]=o,m[2]=n,m[3]=s,m[4]=_,m[5]=a,m[6]=h,m[7]=$,m[8]=l},st.prototype=new n,st.loadModel=function(t){var e=new st;return n._$Bj(e,t),e},st.loadModel=function(t){var e=new st;return n._$Bj(e,t),e},st._$eR=function(){var t=new st;return t},st._$ud=function(t){var e=new _$Y("../_$_d/_$e2/_$CP/_$_H._$y");if(0==e.exists())throw new _$bm("_$e2 _$_ _$B _$1P :: "+e._$HT());for(var i=["../_$_d/_$e2/_$CP/_$_H.512/_$xH._$Z","../_$_d/_$e2/_$CP/_$_H.512/_$zH._$Z","../_$_d/_$e2/_$CP/_$_H.512/_$hH._$Z","../_$_d/_$e2/_$CP/_$_H.512/_$WH._$Z"],r=st.loadModel(e._$Sk()),o=0;o<i.length;o++){var n=new _$Y(i[o]);if(0==n.exists())throw new _$bm("_$e2 _$_ _$B _$1P :: "+n._$HT());r.setTexture(o,_$oT._$_R(t,n._$Sk()))}return r},st.prototype.setGL=function(t){this.drawParamWebGL.setGL(t)},st.prototype.setTransform=function(t){this.drawParamWebGL.setTransform(t)},st.prototype.draw=function(){this._$Yg.draw(this.drawParamWebGL)},st.prototype._$Dj=function(){this.drawParamWebGL._$Dj()},st.prototype.setTexture=function(t,e){null==this.drawParamWebGL&&i._$bP("_$9P for QT _$IP / _$rg() is _$B _$5P!!"),this.drawParamWebGL.setTexture(t,e)},st.prototype.setTexture=function(t,e){null==this.drawParamWebGL&&i._$bP("_$9P for QT _$IP / _$rg() is _$B _$5P!!"),this.drawParamWebGL.setTexture(t,e)},st.prototype._$Cm=function(){return this.drawParamWebGL._$Cm()},st.prototype._$wm=function(t){this.drawParamWebGL._$wm(t)},st.prototype.getDrawParam=function(){return this.drawParamWebGL},st.prototype.setMatrix=function(t){this.drawParamWebGL.setMatrix(t)},_t.startsWith=function(t,e,i){var r=e+i.length;if(r>=t.length)return!1;for(var o=e;o<r;o++)if(_t.getChar(t,o)!=i.charAt(o-e))return!1;return!0},_t.getChar=function(t,e){return String.fromCharCode(t.getUint8(e))},_t.createString=function(t,e,i){for(var r=new ArrayBuffer(2*i),o=new Uint16Array(r),n=0;n<i;n++)o[n]=t.getUint8(e+n);return String.fromCharCode.apply(null,o)},_t._$Tg=function(t,e,i,r){t instanceof ArrayBuffer&&(t=new DataView(t));var o=i,n=!1,s=!1,_=0,a=_t.getChar(t,o);"-"==a&&(n=!0,o++);for(var h=!1;o<e;o++){switch(a=_t.getChar(t,o)){case"0":_*=10;break;case"1":_=10*_+1;break;case"2":_=10*_+2;break;case"3":_=10*_+3;break;case"4":_=10*_+4;break;case"5":_=10*_+5;break;case"6":_=10*_+6;break;case"7":_=10*_+7;break;case"8":_=10*_+8;break;case"9":_=10*_+9;break;case".":s=!0,o++,h=!0;break;default:h=!0}if(h)break}if(s)for(var $=.1,l=!1;o<e;o++){switch(a=_t.getChar(t,o)){case"0":break;case"1":_+=1*$;break;case"2":_+=2*$;break;case"3":_+=3*$;break;case"4":_+=4*$;break;case"5":_+=5*$;break;case"6":_+=6*$;break;case"7":_+=7*$;break;case"8":_+=8*$;break;case"9":_+=9*$;break;default:l=!0}if($*=.1,l)break}return n&&(_=-_),r[0]=o,_},at.prototype._$Zm=function(){return this._$ig},at.prototype._$pH=function(){this._$ig=new Array},at.prototype._$O2=function(t){this._$ig=t._$oH()},at.prototype._$Dm=function(t){this._$ig.push(t)},ht.prototype=new E,ht._$Ed=function(t){var e=new Float32Array(t);return e},ht._$zk=function(t){var e=new Int16Array(t);return e},ht._$Ud=function(t,e){return null==t||t._$7T()<e.length?(t=ht._$Ed(2*e.length),t.put(e),t._$Rf(0)):(t.clear(),t.put(e),t._$Rf(0)),t},ht._$Kk=function(t,e){return null==t||t._$7T()<e.length?(t=ht._$zk(2*e.length),t.put(e),t._$Rf(0)):(t.clear(),t.put(e),t._$Rf(0)),t},ht._$0m=function(){return this._$Xd},ht._$Qm=function(t){this._$Xd=t},ht.prototype.setGL=function(t){this.gl=t},ht.prototype.setTransform=function(t){this.transform=t},ht.prototype._$Af=function(){var t=this.gl;this.firstDraw&&(this.initShader(),this.firstDraw=!1,this.anisotropyExt=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic"),this.anisotropyExt&&(this.maxAnisotropy=t.getParameter(this.anisotropyExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.DEPTH_TEST),t.frontFace(t.CW),t.enable(t.BLEND),t.colorMask(1,1,1,1),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.useProgram(this.shaderProgram),t.enableVertexAttribArray(this.a_position_Loc),t.enableVertexAttribArray(this.a_texCoord_Loc),t.activeTexture(t.TEXTURE0),t.uniform1i(this.s_texture0_Loc,0)},ht.prototype._$1R=function(t,e,i,r,o,n,s,_){if(!(n<.01)){var a=(n>.9?ut.EXPAND_W:0,this.gl);if(null==this.gl)throw new Error("gl is null");a.useProgram(this.shaderProgram),this.culling?this.gl.enable(a.CULL_FACE):this.gl.disable(a.CULL_FACE),this.gl.enable(a.BLEND);var h,$,l,u,p=!0;switch(s){case tt._$Km:default:h=p?a.ONE:a.SRC_ALPHA,$=a.ONE_MINUS_SRC_ALPHA,l=a.ONE,u=a.ONE_MINUS_SRC_ALPHA;break;case tt._$om:h=a.SRC_ALPHA,$=a.ONE,l=a.ZERO,u=a.ONE;break;case tt._$_m:p?(h=a.DST_COLOR,$=a.ONE_MINUS_SRC_ALPHA):(h=a.ZERO,$=a.SRC_COLOR),l=a.ZERO,u=a.ONE}a.blendFuncSeparate(h,$,l,u),this._$zg=$t(a,this._$zg,r),a.enableVertexAttribArray(this.a_position_Loc),a.vertexAttribPointer(this.a_position_Loc,2,a.FLOAT,!1,0,0);var f=!1;f&&checkError("_$1R x1"),this._$tf=$t(a,this._$tf,o),a.enableVertexAttribArray(this.a_texCoord_Loc),a.vertexAttribPointer(this.a_texCoord_Loc,2,a.FLOAT,!1,0,0),f&&checkError("_$1R x2"),a.bindTexture(a.TEXTURE_2D,this.textures[t]),this.anisotropyExt&&a.texParameteri(a.TEXTURE_2D,this.anisotropyExt.TEXTURE_MAX_ANISOTROPY_EXT,this.maxAnisotropy),f&&checkError("_$1R x3");var c=1,d=1,g=1,y=this._$x2*c,m=this._$ef*d,T=this._$lT*g,M=this._$bf*n;p?a.uniform4f(this.u_baseColor,y*n,m*n,T*n,M):a.uniform4f(this.u_baseColor,y,m,T,M),this._$oR=lt(a,this._$oR,i),a.enableVertexAttribArray(this.a_position_Loc),a.uniformMatrix4fv(this.u_matrix_Loc,!1,this.matrix4x4);var v=i.length;a.drawElements(a.TRIANGLES,v,a.UNSIGNED_SHORT,0),a.bindTexture(a.TEXTURE_2D,null)}},ht.prototype._$Cm=function(){throw new Error("_$Cm")},ht.prototype._$wm=function(t){throw new Error("_$wm")},ht.prototype._$Dj=function(){for(var t=0;t<this.textures.length;t++){var e=this.textures[t];0!=e&&(this.gl._$Dj(1,this.textures,t),this.textures[t]=null)}},ht.prototype.setTexture=function(t,e){this.textures[t]=e},ht.prototype.initShader=function(){var t=this.gl;this.loadShaders2(),this.a_position_Loc=t.getAttribLocation(this.shaderProgram,"a_position"),this.a_texCoord_Loc=t.getAttribLocation(this.shaderProgram,"a_texCoord"),this.s_texture0_Loc=t.getUniformLocation(this.shaderProgram,"s_texture0"),this.u_matrix_Loc=t.getUniformLocation(this.shaderProgram,"modelViewProjectionMatrix"),this.u_baseColor=t.getUniformLocation(this.shaderProgram,"baseColor")},ht.prototype.disposeShader=function(){this.shaderProgram&&(gl.deleteProgram(this.shaderProgram),this.shaderProgram=null)},ht.prototype.compileShader=function(t,e){var r,o=this.gl,n=e,s=o.createShader(t);if(null==s)return i._$GP("_$T2 to create shader"),null;o.shaderSource(s,n),o.compileShader(s);var r=o.getShaderParameter(s,o.COMPILE_STATUS);if(!r){var _=o.getShaderInfoLog(s);return i._$GP("_$T2 to compile shader : "+_),o.deleteShader(s),null}return s},ht.prototype.loadShaders2=function(){var t,e,r=this.gl;if(this.shaderProgram=r.createProgram(),!this.shaderProgram)return!1;var o="attribute vec4 a_position;attribute vec2 a_texCoord;varying vec2 v_texCoord;uniform mat4 modelViewProjectionMatrix;void main(){  gl_Position = modelViewProjectionMatrix * a_position;  v_texCoord = a_texCoord ;}",n="precision mediump float ;varying vec2 v_texCoord;uniform sampler2D s_texture0;uniform vec4 baseColor ;void main(){  vec4 f_tmp = texture2D(s_texture0 , v_texCoord) * baseColor ;  gl_FragColor = f_tmp ;}";if(t=this.compileShader(r.VERTEX_SHADER,o),!t)return i._$GP("Vertex shader compile _$bP!"),!1;if(e=this.compileShader(r.FRAGMENT_SHADER,n),!e)return i._$GP("Fragment shader compile _$bP!"),!1;r.attachShader(this.shaderProgram,t),r.attachShader(this.shaderProgram,e),r.linkProgram(this.shaderProgram);var s=r.getProgramParameter(this.shaderProgram,r.LINK_STATUS);if(!s){var _=r.getProgramInfoLog(this.shaderProgram);return i._$GP("_$T2 to link program: "+_),t&&(r.deleteShader(t),t=0),e&&(r.deleteShader(e),e=0),this.shaderProgram&&(r.deleteProgram(this.shaderProgram),this.shaderProgram=0),!1}return!0},ut._$jm="2.0.04_1",ut._$Dd=199900001,ut._$mH=!0,ut._$mR=!0,ut._$Uk=!1,ut._$Sf=!0,ut._$fm=!0,ut._$qk=!0,ut._$em=!0,ut.L2D_DEFORMER_EXTEND=!0,ut._$lk=!1,ut._$7d=!1,ut._$Am=!1,ut.L2D_NO_ERROR=0,ut._$Pa=1e3,ut._$Em=1001,ut._$um=1100,ut._$da=2e3,ut._$2a=2001,ut._$ka=2002,ut._$0a=4e3,ut._$Bk=!0,ut._$Uf=0,ut.IGNORE_CLIP=!1,ut.IGNORE_EXPAND=!1,ut.EXPAND_W=2,ut.USE_ADJUST_TRANSLATION=!0,ut.USE_CANVAS_TRANSFORM=!0,ut.USE_CACHED_POLYGON_IMAGE=!1,ut.DEBUG_DATA={},ut.PROFILE_IOS_SPEED={PROFILE_NAME:"iOS Speed",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!0,EXPAND_W:4},ut.PROFILE_IOS_QUALITY={PROFILE_NAME:"iOS HiQ",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},ut.PROFILE_IOS_DEFAULT=ut.PROFILE_IOS_QUALITY,ut.PROFILE_ANDROID={PROFILE_NAME:"Android",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},ut.PROFILE_DESKTOP={PROFILE_NAME:"Desktop",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},ut.initProfile=function(){P.isIOS()?ut.setupProfile(ut.PROFILE_IOS_DEFAULT):P.isAndroid()?ut.setupProfile(ut.PROFILE_ANDROID):ut.setupProfile(ut.PROFILE_DESKTOP)},ut.setupProfile=function(t,e){if("number"==typeof t)switch(t){case 9901:t=ut.PROFILE_IOS_SPEED;break;case 9902:t=ut.PROFILE_IOS_QUALITY;break;case 9903:t=ut.PROFILE_IOS_DEFAULT;break;case 9904:t=ut.PROFILE_ANDROID;break;case 9905:t=ut.PROFILE_DESKTOP;break;default:alert("profile _$B _$1P : "+t)}arguments.length<2&&(e=!0),e&&console.log("profile : "+t.PROFILE_NAME);for(var i in t)ut[i]=t[i],e&&console.log("  ["+i+"] = "+t[i])},ut.init=function(){if(ut._$Bk){console.log("Live2D %s",ut._$jm),ut._$Bk=!1;var t=!1;t=!0,ut.initProfile()}},ut.getVersionStr=function(){return ut._$jm},ut.getVersionNo=function(){return ut._$Dd},ut._$mf=function(t){ut._$Uf=t},ut.getError=function(){var t=ut._$Uf;return ut._$Uf=0,t},ut.prototype.dispose=function(){c._$Ta()},pt.prototype=new _,pt._$sf=new Array,pt.prototype._$pH=function(){this._$Xg=new it,this._$Xg._$pH()},pt.prototype._$O2=function(t){_.prototype._$O2.call(this,t),this._$V=t._$BT(),this._$R=t._$BT(),this._$Xg=t._$oH(),this._$hR=t._$oH(),_.prototype.readV2_opacity.call(this,t)},pt.prototype.init=function(t){var e=new ft(this),i=(this._$R+1)*(this._$V+1);return null!=e._$xd&&(e._$xd=null),e._$xd=new Float32Array(2*i),null!=e._$vd&&(e._$vd=null),this._$Sj()?e._$vd=new Float32Array(2*i):e._$vd=null,e},pt.prototype._$td=function(t,e){var i=e;if(this._$Xg._$1d(t)){var r=this._$Nf(),o=pt._$sf;o[0]=!1,k._$Nd(t,this._$Xg,o,r,this._$hR,i._$xd,0,2),e._$4k(o[0]),this.interpolateOpacity(t,this._$Xg,e,o)}},pt.prototype._$jk=function(t,e){var r=e;if(r._$vg(!0),this._$Sj()){var o=this.getTargetBaseDataID();if(r._$Fd==_._$5d&&(r._$Fd=t.getBaseDataIndex(o)),r._$Fd<0)ut._$mR&&i._$bP("_$T _$2H _$X :: %s",o),r._$vg(!1);else{var n=t.getBaseData(r._$Fd),s=t._$Mj(r._$Fd);if(null!=n&&s._$7R()){var a=s.getTotalScale();r.setTotalScale_notForClient(a);var h=s.getTotalOpacity();r.setTotalOpacity(h*r.getInterpolatedOpacity()),n._$ok(t,s,r._$xd,r._$vd,this._$Nf(),0,2),r._$vg(!0)}else r._$vg(!1)}}else r.setTotalOpacity(r.getInterpolatedOpacity())},pt.prototype._$ok=function(t,e,i,r,o,n,s){var _=e,a=null!=_._$vd?_._$vd:_._$xd;pt.transformPoints_sdk2(i,r,o,n,s,a,this._$R,this._$V)},pt.transformPoints_sdk2=function(t,e,i,r,o,n,s,_){for(var a,h,$,l=i*o,u=0,p=0,f=0,c=0,d=0,g=0,y=!1,m=r;m<l;m+=o){var T,M,v,P;if(v=t[m],P=t[m+1],T=v*s,M=P*_,T<0||M<0||s<=T||_<=M){var S=s+1;if(!y){y=!0,u=.25*(n[2*(0+0*S)]+n[2*(s+0*S)]+n[2*(0+_*S)]+n[2*(s+_*S)]),p=.25*(n[2*(0+0*S)+1]+n[2*(s+0*S)+1]+n[2*(0+_*S)+1]+n[2*(s+_*S)+1]);var A=n[2*(s+_*S)]-n[2*(0+0*S)],E=n[2*(s+_*S)+1]-n[2*(0+0*S)+1],L=n[2*(s+0*S)]-n[2*(0+_*S)],D=n[2*(s+0*S)+1]-n[2*(0+_*S)+1];f=.5*(A+L),c=.5*(E+D),d=.5*(A-L),g=.5*(E-D),u-=.5*(f+d),p-=.5*(c+g)}if(-2<v&&v<3&&-2<P&&P<3)if(v<=0)if(P<=0){var I=n[2*(0+0*S)],w=n[2*(0+0*S)+1],x=u-2*f,R=p-2*c,O=u-2*d,F=p-2*g,H=u-2*f-2*d,k=p-2*c-2*g,N=.5*(v- -2),j=.5*(P- -2);N+j<=1?(e[m]=H+(O-H)*N+(x-H)*j,e[m+1]=k+(F-k)*N+(R-k)*j):(e[m]=I+(x-I)*(1-N)+(O-I)*(1-j),e[m+1]=w+(R-w)*(1-N)+(F-w)*(1-j))}else if(P>=1){var O=n[2*(0+_*S)],F=n[2*(0+_*S)+1],H=u-2*f+1*d,k=p-2*c+1*g,I=u+3*d,w=p+3*g,x=u-2*f+3*d,R=p-2*c+3*g,N=.5*(v- -2),j=.5*(P-1);N+j<=1?(e[m]=H+(O-H)*N+(x-H)*j,e[m+1]=k+(F-k)*N+(R-k)*j):(e[m]=I+(x-I)*(1-N)+(O-I)*(1-j),e[m+1]=w+(R-w)*(1-N)+(F-w)*(1-j))}else{var C=0|M;C==_&&(C=_-1);var N=.5*(v- -2),j=M-C,G=C/_,b=(C+1)/_,O=n[2*(0+C*S)],F=n[2*(0+C*S)+1],I=n[2*(0+(C+1)*S)],w=n[2*(0+(C+1)*S)+1],H=u-2*f+G*d,k=p-2*c+G*g,x=u-2*f+b*d,R=p-2*c+b*g;N+j<=1?(e[m]=H+(O-H)*N+(x-H)*j,e[m+1]=k+(F-k)*N+(R-k)*j):(e[m]=I+(x-I)*(1-N)+(O-I)*(1-j),e[m+1]=w+(R-w)*(1-N)+(F-w)*(1-j))}else if(1<=v)if(P<=0){var x=n[2*(s+0*S)],R=n[2*(s+0*S)+1],I=u+3*f,w=p+3*c,H=u+1*f-2*d,k=p+1*c-2*g,O=u+3*f-2*d,F=p+3*c-2*g,N=.5*(v-1),j=.5*(P- -2);N+j<=1?(e[m]=H+(O-H)*N+(x-H)*j,e[m+1]=k+(F-k)*N+(R-k)*j):(e[m]=I+(x-I)*(1-N)+(O-I)*(1-j),e[m+1]=w+(R-w)*(1-N)+(F-w)*(1-j))}else if(P>=1){var H=n[2*(s+_*S)],k=n[2*(s+_*S)+1],O=u+3*f+1*d,F=p+3*c+1*g,x=u+1*f+3*d,R=p+1*c+3*g,I=u+3*f+3*d,w=p+3*c+3*g,N=.5*(v-1),j=.5*(P-1);N+j<=1?(e[m]=H+(O-H)*N+(x-H)*j,e[m+1]=k+(F-k)*N+(R-k)*j):(e[m]=I+(x-I)*(1-N)+(O-I)*(1-j),e[m+1]=w+(R-w)*(1-N)+(F-w)*(1-j))}else{var C=0|M;C==_&&(C=_-1);var N=.5*(v-1),j=M-C,G=C/_,b=(C+1)/_,H=n[2*(s+C*S)],k=n[2*(s+C*S)+1],x=n[2*(s+(C+1)*S)],R=n[2*(s+(C+1)*S)+1],O=u+3*f+G*d,F=p+3*c+G*g,I=u+3*f+b*d,w=p+3*c+b*g;N+j<=1?(e[m]=H+(O-H)*N+(x-H)*j,e[m+1]=k+(F-k)*N+(R-k)*j):(e[m]=I+(x-I)*(1-N)+(O-I)*(1-j),e[m+1]=w+(R-w)*(1-N)+(F-w)*(1-j))}else if(P<=0){var Y=0|T;Y==s&&(Y=s-1);var N=T-Y,j=.5*(P- -2),B=Y/s,U=(Y+1)/s,x=n[2*(Y+0*S)],R=n[2*(Y+0*S)+1],I=n[2*(Y+1+0*S)],w=n[2*(Y+1+0*S)+1],H=u+B*f-2*d,k=p+B*c-2*g,O=u+U*f-2*d,F=p+U*c-2*g;N+j<=1?(e[m]=H+(O-H)*N+(x-H)*j,e[m+1]=k+(F-k)*N+(R-k)*j):(e[m]=I+(x-I)*(1-N)+(O-I)*(1-j),e[m+1]=w+(R-w)*(1-N)+(F-w)*(1-j))}else if(P>=1){var Y=0|T;Y==s&&(Y=s-1);var N=T-Y,j=.5*(P-1),B=Y/s,U=(Y+1)/s,H=n[2*(Y+_*S)],k=n[2*(Y+_*S)+1],O=n[2*(Y+1+_*S)],F=n[2*(Y+1+_*S)+1],x=u+B*f+3*d,R=p+B*c+3*g,I=u+U*f+3*d,w=p+U*c+3*g;N+j<=1?(e[m]=H+(O-H)*N+(x-H)*j,e[m+1]=k+(F-k)*N+(R-k)*j):(e[m]=I+(x-I)*(1-N)+(O-I)*(1-j),e[m+1]=w+(R-w)*(1-N)+(F-w)*(1-j))}else System.err.printf("_$bP calc : %.4f , %.4f\t\t\t\t\t@@BDBoxGrid\n",v,P);else e[m]=u+v*f+P*d,e[m+1]=p+v*c+P*g}else h=T-(0|T),$=M-(0|M),a=2*((0|T)+(0|M)*(s+1)),h+$<1?(e[m]=n[a]*(1-h-$)+n[a+2]*h+n[a+2*(s+1)]*$,e[m+1]=n[a+1]*(1-h-$)+n[a+3]*h+n[a+2*(s+1)+1]*$):(e[m]=n[a+2*(s+1)+2]*(h-1+$)+n[a+2*(s+1)]*(1-h)+n[a+2]*(1-$),e[m+1]=n[a+2*(s+1)+3]*(h-1+$)+n[a+2*(s+1)+1]*(1-h)+n[a+3]*(1-$))}},pt.prototype.transformPoints_sdk1=function(t,e,i,r,o,n,s){for(var _,a,h,$,l,u,p,f=e,c=this._$R,d=this._$V,g=o*s,y=null!=f._$vd?f._$vd:f._$xd,m=n;m<g;m+=s)ut._$em?(_=i[m],
a=i[m+1],_<0?_=0:_>1&&(_=1),a<0?a=0:a>1&&(a=1),_*=c,a*=d,h=0|_,$=0|a,h>c-1&&(h=c-1),$>d-1&&($=d-1),u=_-h,p=a-$,l=2*(h+$*(c+1))):(_=i[m]*c,a=i[m+1]*d,u=_-(0|_),p=a-(0|a),l=2*((0|_)+(0|a)*(c+1))),u+p<1?(r[m]=y[l]*(1-u-p)+y[l+2]*u+y[l+2*(c+1)]*p,r[m+1]=y[l+1]*(1-u-p)+y[l+3]*u+y[l+2*(c+1)+1]*p):(r[m]=y[l+2*(c+1)+2]*(u-1+p)+y[l+2*(c+1)]*(1-u)+y[l+2]*(1-p),r[m+1]=y[l+2*(c+1)+3]*(u-1+p)+y[l+2*(c+1)+1]*(1-u)+y[l+3]*(1-p))},pt.prototype._$Nf=function(){return(this._$R+1)*(this._$V+1)},pt.prototype.getType=function(){return _._$_k},ft.prototype=new N,ct.prototype.setup=function(t,e,i){this._$Im=this._$9k(),this.p2._$3f(),3==arguments.length&&(this._$OR=t,this._$Tj=e,this.p1._$W=i,this.p2._$W=i,this.p2.y=t,this.setup())},ct.prototype.getPhysicsPoint1=function(){return this.p1},ct.prototype.getPhysicsPoint2=function(){return this.p2},ct.prototype._$Md=function(){return this._$wk},ct.prototype._$Wd=function(t){this._$wk=t},ct.prototype._$Yd=function(){return this._$8j},ct.prototype._$xm=function(){return this._$Ek},ct.prototype._$9k=function(){return-180*Math.atan2(this.p1.x-this.p2.x,-(this.p1.y-this.p2.y))/Math.PI},ct.prototype.addSrcParam=function(t,e,i,r){var o=new yt(t,e,i,r);this._$bT.push(o)},ct.prototype.addTargetParam=function(t,e,i,r){var o=new Tt(t,e,i,r);this._$MH.push(o)},ct.prototype.update=function(t,e){if(0==this._$PH)return this._$PH=this._$Pf=e,void(this._$OR=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y)));var i=(e-this._$Pf)/1e3;if(0!=i){for(var r=this._$bT.length-1;r>=0;--r){var o=this._$bT[r];o._$RH(t,this)}this._$RR(t,i),this._$8j=this._$9k(),this._$Ek=(this._$8j-this._$Im)/i,this._$Im=this._$8j}for(var r=this._$MH.length-1;r>=0;--r){var n=this._$MH[r];n._$9g(t,this)}this._$Pf=e},ct.prototype._$RR=function(t,e){var i=1/e;this.p1.vx=(this.p1.x-this.p1._$m2)*i,this.p1.vy=(this.p1.y-this.p1._$a2)*i,this.p1.ax=(this.p1.vx-this.p1._$aT)*i,this.p1.ay=(this.p1.vy-this.p1._$0T)*i,this.p1.fx=this.p1.ax*this.p1._$W,this.p1.fy=this.p1.ay*this.p1._$W,this.p1._$3f();var r,o,n=-Math.atan2(this.p1.y-this.p2.y,this.p1.x-this.p2.x),s=Math.cos(n),_=Math.sin(n),a=9.8*this.p2._$W,h=this._$wk*D._$kg,$=a*Math.cos(n-h);r=$*_,o=$*s;var l=-this.p1.fx*_*_,u=-this.p1.fy*_*s,p=-this.p2.vx*this._$Tj,f=-this.p2.vy*this._$Tj;this.p2.fx=r+l+p,this.p2.fy=o+u+f,this.p2.ax=this.p2.fx/this.p2._$W,this.p2.ay=this.p2.fy/this.p2._$W,this.p2.vx+=this.p2.ax*e,this.p2.vy+=this.p2.ay*e,this.p2.x+=this.p2.vx*e,this.p2.y+=this.p2.vy*e;var c=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y));this.p2.x=this.p1.x+this._$OR*(this.p2.x-this.p1.x)/c,this.p2.y=this.p1.y+this._$OR*(this.p2.y-this.p1.y)/c,this.p2.vx=(this.p2.x-this.p2._$m2)*i,this.p2.vy=(this.p2.y-this.p2._$a2)*i,this.p2._$3f()},dt.prototype._$3f=function(){this._$m2=this.x,this._$a2=this.y,this._$aT=this.vx,this._$0T=this.vy},gt.prototype._$RH=function(t,e){},yt.prototype=new gt,yt.prototype._$RH=function(t,e){var i=this.scale*t.getParamFloat(this._$LT),r=e.getPhysicsPoint1();switch(this._$eT){default:case ct.Src.SRC_TO_X:r.x=r.x+(i-r.x)*this._$N2;break;case ct.Src.SRC_TO_Y:r.y=r.y+(i-r.y)*this._$N2;break;case ct.Src.SRC_TO_G_ANGLE:var o=e._$Md();o+=(i-o)*this._$N2,e._$Wd(o)}},mt.prototype._$9g=function(t,e){},Tt.prototype=new mt,Tt.prototype._$9g=function(t,e){switch(this._$9H){default:case ct.Target.TARGET_FROM_ANGLE:t.setParamFloat(this._$LT,this.scale*e._$Yd(),this._$N2);break;case ct.Target.TARGET_FROM_ANGLE_V:t.setParamFloat(this._$LT,this.scale*e._$xm(),this._$N2)}},ct.Src=function(){},ct.Src.SRC_TO_X="SRC_TO_X",ct.Src.SRC_TO_Y="SRC_TO_Y",ct.Src.SRC_TO_G_ANGLE="SRC_TO_G_ANGLE",ct.Target=function(){},ct.Target.TARGET_FROM_ANGLE="TARGET_FROM_ANGLE",ct.Target.TARGET_FROM_ANGLE_V="TARGET_FROM_ANGLE_V",window.UtSystem=a,window.UtDebug=i,window.LDTransform=nt,window.LDGL=J,window.Live2D=ut,window.Live2DModelWebGL=st,window.Live2DModelJS=p,window.Live2DMotion=q,window.MotionQueueManager=h,window.PhysicsHair=ct,window.AMotion=T,window.PartsDataID=u,window.DrawDataID=x,window.BaseDataID=l,window.ParamID=M,ut.init();var Mt=!1}();var texCounter=0;L2DBaseModel.prototype.getModelMatrix=function(){return this.modelMatrix},L2DBaseModel.prototype.setAlpha=function(t){t>.999&&(t=1),t<.001&&(t=0),this.alpha=t},L2DBaseModel.prototype.getAlpha=function(){return this.alpha},L2DBaseModel.prototype.isInitialized=function(){return this.initialized},L2DBaseModel.prototype.setInitialized=function(t){this.initialized=t},L2DBaseModel.prototype.isUpdating=function(){return this.updating},L2DBaseModel.prototype.setUpdating=function(t){this.updating=t},L2DBaseModel.prototype.getLive2DModel=function(){return this.live2DModel},L2DBaseModel.prototype.setLipSync=function(t){this.lipSync=t},L2DBaseModel.prototype.setLipSyncValue=function(t){this.lipSyncValue=t},L2DBaseModel.prototype.setAccel=function(t,e,i){this.accelX=t,this.accelY=e,this.accelZ=i},L2DBaseModel.prototype.setDrag=function(t,e){this.dragX=t,this.dragY=e},L2DBaseModel.prototype.getMainMotionManager=function(){return this.mainMotionManager},L2DBaseModel.prototype.getExpressionManager=function(){return this.expressionManager},L2DBaseModel.prototype.loadModelData=function(t,e){var i=Live2DFramework.getPlatformManager();this.debugMode&&i.log("Load model : "+t);var r=this;i.loadLive2DModel(t,function(t){r.live2DModel=t,r.live2DModel.saveParam();var i=Live2D.getError();return 0!=i?void console.error("Error : Failed to loadModelData()."):(r.modelMatrix=new L2DModelMatrix(r.live2DModel.getCanvasWidth(),r.live2DModel.getCanvasHeight()),r.modelMatrix.setWidth(2),r.modelMatrix.setCenterPosition(0,0),void e(r.live2DModel))})},L2DBaseModel.prototype.loadTexture=function(t,e,i){texCounter++;var r=Live2DFramework.getPlatformManager();this.debugMode&&r.log("Load Texture : "+e);var o=this;r.loadTexture(this.live2DModel,t,e,function(){texCounter--,0==texCounter&&(o.isTexLoaded=!0),"function"==typeof i&&i()})},L2DBaseModel.prototype.loadMotion=function(t,e,i){var r=Live2DFramework.getPlatformManager();this.debugMode&&r.log("Load Motion : "+e);var o=null,n=this;r.loadBytes(e,function(e){o=Live2DMotion.loadMotion(e),null!=t&&(n.motions[t]=o),i(o)})},L2DBaseModel.prototype.loadExpression=function(t,e,i){var r=Live2DFramework.getPlatformManager();this.debugMode&&r.log("Load Expression : "+e);var o=this;r.loadBytes(e,function(e){null!=t&&(o.expressions[t]=L2DExpressionMotion.loadJson(e)),"function"==typeof i&&i()})},L2DBaseModel.prototype.loadPose=function(t,e){var i=Live2DFramework.getPlatformManager();this.debugMode&&i.log("Load Pose : "+t);var r=this;try{i.loadBytes(t,function(t){r.pose=L2DPose.load(t),"function"==typeof e&&e()})}catch(t){console.warn(t)}},L2DBaseModel.prototype.loadPhysics=function(t){var e=Live2DFramework.getPlatformManager();this.debugMode&&e.log("Load Physics : "+t);var i=this;try{e.loadBytes(t,function(t){i.physics=L2DPhysics.load(t)})}catch(t){console.warn(t)}},L2DBaseModel.prototype.hitTestSimple=function(t,e,i){var r=this.live2DModel.getDrawDataIndex(t);if(r<0)return!1;for(var o=this.live2DModel.getTransformedPoints(r),n=this.live2DModel.getCanvasWidth(),s=0,_=this.live2DModel.getCanvasHeight(),a=0,h=0;h<o.length;h+=2){var $=o[h],l=o[h+1];$<n&&(n=$),$>s&&(s=$),l<_&&(_=l),l>a&&(a=l)}var u=this.modelMatrix.invertTransformX(e),p=this.modelMatrix.invertTransformY(i);return n<=u&&u<=s&&_<=p&&p<=a},L2DExpressionMotion.prototype=new AMotion,L2DExpressionMotion.EXPRESSION_DEFAULT="DEFAULT",L2DExpressionMotion.TYPE_SET=0,L2DExpressionMotion.TYPE_ADD=1,L2DExpressionMotion.TYPE_MULT=2,L2DExpressionMotion.loadJson=function(t){var e=new L2DExpressionMotion,i=Live2DFramework.getPlatformManager(),r=i.jsonParseFromBytes(t);if(e.setFadeIn(parseInt(r.fade_in)>0?parseInt(r.fade_in):1e3),e.setFadeOut(parseInt(r.fade_out)>0?parseInt(r.fade_out):1e3),null==r.params)return e;var o=r.params,n=o.length;e.paramList=[];for(var s=0;s<n;s++){var _=o[s],a=_.id.toString(),h=parseFloat(_.val),$=L2DExpressionMotion.TYPE_ADD,l=null!=_.calc?_.calc.toString():"add";if($="add"===l?L2DExpressionMotion.TYPE_ADD:"mult"===l?L2DExpressionMotion.TYPE_MULT:"set"===l?L2DExpressionMotion.TYPE_SET:L2DExpressionMotion.TYPE_ADD,$==L2DExpressionMotion.TYPE_ADD){var u=null==_.def?0:parseFloat(_.def);h-=u}else if($==L2DExpressionMotion.TYPE_MULT){var u=null==_.def?1:parseFloat(_.def);0==u&&(u=1),h/=u}var p=new L2DExpressionParam;p.id=a,p.type=$,p.value=h,e.paramList.push(p)}return e},L2DExpressionMotion.prototype.updateParamExe=function(t,e,i,r){for(var o=this.paramList.length-1;o>=0;--o){var n=this.paramList[o];n.type==L2DExpressionMotion.TYPE_ADD?t.addToParamFloat(n.id,n.value,i):n.type==L2DExpressionMotion.TYPE_MULT?t.multParamFloat(n.id,n.value,i):n.type==L2DExpressionMotion.TYPE_SET&&t.setParamFloat(n.id,n.value,i)}},L2DEyeBlink.prototype.calcNextBlink=function(){var t=UtSystem.getUserTimeMSec(),e=Math.random();return t+e*(2*this.blinkIntervalMsec-1)},L2DEyeBlink.prototype.setInterval=function(t){this.blinkIntervalMsec=t},L2DEyeBlink.prototype.setEyeMotion=function(t,e,i){this.closingMotionMsec=t,this.closedMotionMsec=e,this.openingMotionMsec=i},L2DEyeBlink.prototype.updateParam=function(t){var e,i=UtSystem.getUserTimeMSec(),r=0;switch(this.eyeState){case EYE_STATE.STATE_CLOSING:r=(i-this.stateStartTime)/this.closingMotionMsec,r>=1&&(r=1,this.eyeState=EYE_STATE.STATE_CLOSED,this.stateStartTime=i),e=1-r;break;case EYE_STATE.STATE_CLOSED:r=(i-this.stateStartTime)/this.closedMotionMsec,r>=1&&(this.eyeState=EYE_STATE.STATE_OPENING,this.stateStartTime=i),e=0;break;case EYE_STATE.STATE_OPENING:r=(i-this.stateStartTime)/this.openingMotionMsec,r>=1&&(r=1,this.eyeState=EYE_STATE.STATE_INTERVAL,this.nextBlinkTime=this.calcNextBlink()),e=r;break;case EYE_STATE.STATE_INTERVAL:this.nextBlinkTime<i&&(this.eyeState=EYE_STATE.STATE_CLOSING,this.stateStartTime=i),e=1;break;case EYE_STATE.STATE_FIRST:default:this.eyeState=EYE_STATE.STATE_INTERVAL,this.nextBlinkTime=this.calcNextBlink(),e=1}this.closeIfZero||(e=-e),t.setParamFloat(this.eyeID_L,e),t.setParamFloat(this.eyeID_R,e)};var EYE_STATE=function(){};EYE_STATE.STATE_FIRST="STATE_FIRST",EYE_STATE.STATE_INTERVAL="STATE_INTERVAL",EYE_STATE.STATE_CLOSING="STATE_CLOSING",EYE_STATE.STATE_CLOSED="STATE_CLOSED",EYE_STATE.STATE_OPENING="STATE_OPENING",L2DMatrix44.mul=function(t,e,i){var r,o,n,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_=4;for(r=0;r<_;r++)for(o=0;o<_;o++)for(n=0;n<_;n++)s[r+4*o]+=t[r+4*n]*e[n+4*o];for(r=0;r<16;r++)i[r]=s[r]},L2DMatrix44.prototype.identity=function(){for(var t=0;t<16;t++)this.tr[t]=t%5==0?1:0},L2DMatrix44.prototype.getArray=function(){return this.tr},L2DMatrix44.prototype.getCopyMatrix=function(){return new Float32Array(this.tr)},L2DMatrix44.prototype.setMatrix=function(t){if(null!=this.tr&&this.tr.length==this.tr.length)for(var e=0;e<16;e++)this.tr[e]=t[e]},L2DMatrix44.prototype.getScaleX=function(){return this.tr[0]},L2DMatrix44.prototype.getScaleY=function(){return this.tr[5]},L2DMatrix44.prototype.transformX=function(t){return this.tr[0]*t+this.tr[12]},L2DMatrix44.prototype.transformY=function(t){return this.tr[5]*t+this.tr[13]},L2DMatrix44.prototype.invertTransformX=function(t){return(t-this.tr[12])/this.tr[0]},L2DMatrix44.prototype.invertTransformY=function(t){return(t-this.tr[13])/this.tr[5]},L2DMatrix44.prototype.multTranslate=function(t,e){var i=[1,0,0,0,0,1,0,0,0,0,1,0,t,e,0,1];L2DMatrix44.mul(i,this.tr,this.tr)},L2DMatrix44.prototype.translate=function(t,e){this.tr[12]=t,this.tr[13]=e},L2DMatrix44.prototype.translateX=function(t){this.tr[12]=t},L2DMatrix44.prototype.translateY=function(t){this.tr[13]=t},L2DMatrix44.prototype.multScale=function(t,e){var i=[t,0,0,0,0,e,0,0,0,0,1,0,0,0,0,1];L2DMatrix44.mul(i,this.tr,this.tr)},L2DMatrix44.prototype.scale=function(t,e){this.tr[0]=t,this.tr[5]=e},L2DModelMatrix.prototype=new L2DMatrix44,L2DModelMatrix.prototype.setPosition=function(t,e){this.translate(t,e)},L2DModelMatrix.prototype.setCenterPosition=function(t,e){var i=this.width*this.getScaleX(),r=this.height*this.getScaleY();this.translate(t-i/2,e-r/2)},L2DModelMatrix.prototype.top=function(t){this.setY(t)},L2DModelMatrix.prototype.bottom=function(t){var e=this.height*this.getScaleY();this.translateY(t-e)},L2DModelMatrix.prototype.left=function(t){this.setX(t)},L2DModelMatrix.prototype.right=function(t){var e=this.width*this.getScaleX();this.translateX(t-e)},L2DModelMatrix.prototype.centerX=function(t){var e=this.width*this.getScaleX();this.translateX(t-e/2)},L2DModelMatrix.prototype.centerY=function(t){var e=this.height*this.getScaleY();this.translateY(t-e/2)},L2DModelMatrix.prototype.setX=function(t){this.translateX(t)},L2DModelMatrix.prototype.setY=function(t){this.translateY(t)},L2DModelMatrix.prototype.setHeight=function(t){var e=t/this.height,i=-e;this.scale(e,i)},L2DModelMatrix.prototype.setWidth=function(t){var e=t/this.width,i=-e;this.scale(e,i)},L2DMotionManager.prototype=new MotionQueueManager,L2DMotionManager.prototype.getCurrentPriority=function(){return this.currentPriority},L2DMotionManager.prototype.getReservePriority=function(){return this.reservePriority},L2DMotionManager.prototype.reserveMotion=function(t){return!(this.reservePriority>=t)&&(!(this.currentPriority>=t)&&(this.reservePriority=t,!0))},L2DMotionManager.prototype.setReservePriority=function(t){this.reservePriority=t},L2DMotionManager.prototype.updateParam=function(t){var e=MotionQueueManager.prototype.updateParam.call(this,t);return this.isFinished()&&(this.currentPriority=0),e},L2DMotionManager.prototype.startMotionPrio=function(t,e){return e==this.reservePriority&&(this.reservePriority=0),this.currentPriority=e,this.startMotion(t,!1)},L2DPhysics.load=function(t){for(var e=new L2DPhysics,i=Live2DFramework.getPlatformManager(),r=i.jsonParseFromBytes(t),o=r.physics_hair,n=o.length,s=0;s<n;s++){var _=o[s],a=new PhysicsHair,h=_.setup,$=parseFloat(h.length),l=parseFloat(h.regist),u=parseFloat(h.mass);a.setup($,l,u);for(var p=_.src,f=p.length,c=0;c<f;c++){var d=p[c],g=d.id,y=PhysicsHair.Src.SRC_TO_X,m=d.ptype;"x"===m?y=PhysicsHair.Src.SRC_TO_X:"y"===m?y=PhysicsHair.Src.SRC_TO_Y:"angle"===m?y=PhysicsHair.Src.SRC_TO_G_ANGLE:UtDebug.error("live2d","Invalid parameter:PhysicsHair.Src");var T=parseFloat(d.scale),M=parseFloat(d.weight);a.addSrcParam(y,g,T,M)}for(var v=_.targets,P=v.length,c=0;c<P;c++){var S=v[c],g=S.id,y=PhysicsHair.Target.TARGET_FROM_ANGLE,m=S.ptype;"angle"===m?y=PhysicsHair.Target.TARGET_FROM_ANGLE:"angle_v"===m?y=PhysicsHair.Target.TARGET_FROM_ANGLE_V:UtDebug.error("live2d","Invalid parameter:PhysicsHair.Target");var T=parseFloat(S.scale),M=parseFloat(S.weight);a.addTargetParam(y,g,T,M)}e.physicsList.push(a)}return e},L2DPhysics.prototype.updateParam=function(t){for(var e=UtSystem.getUserTimeMSec()-this.startTimeMSec,i=0;i<this.physicsList.length;i++)this.physicsList[i].update(t,e)},L2DPose.load=function(t){for(var e=new L2DPose,i=Live2DFramework.getPlatformManager(),r=i.jsonParseFromBytes(t),o=r.parts_visible,n=o.length,s=0;s<n;s++){for(var _=o[s],a=_.group,h=a.length,$=new Array,l=0;l<h;l++){var u=a[l],p=new L2DPartsParam(u.id);if($[l]=p,null!=u.link){var f=u.link,c=f.length;p.link=new Array;for(var d=0;d<c;d++){var g=new L2DPartsParam(f[d]);p.link.push(g)}}}e.partsGroups.push($)}return e},L2DPose.prototype.updateParam=function(t){if(null!=t){t!=this.lastModel&&this.initParam(t),this.lastModel=t;var e=UtSystem.getTimeMSec(),i=0==this.lastTime?0:(e-this.lastTime)/1e3;this.lastTime=e,i<0&&(i=0);for(var r=0;r<this.partsGroups.length;r++)this.normalizePartsOpacityGroup(t,this.partsGroups[r],i),this.copyOpacityOtherParts(t,this.partsGroups[r])}},L2DPose.prototype.initParam=function(t){if(null!=t)for(var e=0;e<this.partsGroups.length;e++)for(var i=this.partsGroups[e],r=0;r<i.length;r++){i[r].initIndex(t);var o=i[r].partsIndex,n=i[r].paramIndex;if(!(o<0)){var s=0!=t.getParamFloat(n);if(t.setPartsOpacity(o,s?1:0),t.setParamFloat(n,s?1:0),null!=i[r].link)for(var _=0;_<i[r].link.length;_++)i[r].link[_].initIndex(t)}}},L2DPose.prototype.normalizePartsOpacityGroup=function(t,e,i){for(var r=-1,o=1,n=.5,s=.5,_=.15,a=0;a<e.length;a++){var h=e[a].partsIndex,$=e[a].paramIndex;if(!(h<0)&&0!=t.getParamFloat($)){if(r>=0)break;r=a,o=t.getPartsOpacity(h),o+=i/n,o>1&&(o=1)}}r<0&&(r=0,o=1);for(var a=0;a<e.length;a++){var h=e[a].partsIndex;if(!(h<0))if(r==a)t.setPartsOpacity(h,o);else{var l,u=t.getPartsOpacity(h);l=o<s?o*(s-1)/s+1:(1-o)*s/(1-s);var p=(1-l)*(1-o);p>_&&(l=1-_/(1-o)),u>l&&(u=l),t.setPartsOpacity(h,u)}}},L2DPose.prototype.copyOpacityOtherParts=function(t,e){for(var i=0;i<e.length;i++){var r=e[i];if(null!=r.link&&!(r.partsIndex<0))for(var o=t.getPartsOpacity(r.partsIndex),n=0;n<r.link.length;n++){var s=r.link[n];s.partsIndex<0||t.setPartsOpacity(s.partsIndex,o)}}},L2DPartsParam.prototype.initIndex=function(t){this.paramIndex=t.getParamIndex("VISIBLE:"+this.id),this.partsIndex=t.getPartsDataIndex(PartsDataID.getID(this.id)),t.setParamFloat(this.paramIndex,1)},L2DTargetPoint.FRAME_RATE=30,L2DTargetPoint.prototype.setPoint=function(t,e){this.faceTargetX=t,this.faceTargetY=e},L2DTargetPoint.prototype.getX=function(){return this.faceX},L2DTargetPoint.prototype.getY=function(){return this.faceY},L2DTargetPoint.prototype.update=function(){var t=.15,e=40/7.5,i=e/L2DTargetPoint.FRAME_RATE;if(0==this.lastTimeSec)return void(this.lastTimeSec=UtSystem.getUserTimeMSec());var r=UtSystem.getUserTimeMSec(),o=(r-this.lastTimeSec)*L2DTargetPoint.FRAME_RATE/1e3;this.lastTimeSec=r;var n=t*L2DTargetPoint.FRAME_RATE,s=o*i/n,_=this.faceTargetX-this.faceX,a=this.faceTargetY-this.faceY;if(0!=_||0!=a){var h=Math.sqrt(_*_+a*a),$=i*_/h,l=i*a/h,u=$-this.faceVX,p=l-this.faceVY,f=Math.sqrt(u*u+p*p);(f<-s||f>s)&&(u*=s/f,p*=s/f,f=s),this.faceVX+=u,this.faceVY+=p;var c=.5*(Math.sqrt(s*s+16*s*h-8*s*h)-s),d=Math.sqrt(this.faceVX*this.faceVX+this.faceVY*this.faceVY);d>c&&(this.faceVX*=c/d,this.faceVY*=c/d),this.faceX+=this.faceVX,this.faceY+=this.faceVY}},L2DViewMatrix.prototype=new L2DMatrix44,L2DViewMatrix.prototype.getMaxScale=function(){return this.max},L2DViewMatrix.prototype.getMinScale=function(){return this.min},L2DViewMatrix.prototype.setMaxScale=function(t){this.max=t},L2DViewMatrix.prototype.setMinScale=function(t){this.min=t},L2DViewMatrix.prototype.isMaxScale=function(){return this.getScaleX()==this.max},L2DViewMatrix.prototype.isMinScale=function(){return this.getScaleX()==this.min},L2DViewMatrix.prototype.adjustTranslate=function(t,e){this.tr[0]*this.maxLeft+(this.tr[12]+t)>this.screenLeft&&(t=this.screenLeft-this.tr[0]*this.maxLeft-this.tr[12]),this.tr[0]*this.maxRight+(this.tr[12]+t)<this.screenRight&&(t=this.screenRight-this.tr[0]*this.maxRight-this.tr[12]),this.tr[5]*this.maxTop+(this.tr[13]+e)<this.screenTop&&(e=this.screenTop-this.tr[5]*this.maxTop-this.tr[13]),this.tr[5]*this.maxBottom+(this.tr[13]+e)>this.screenBottom&&(e=this.screenBottom-this.tr[5]*this.maxBottom-this.tr[13]);var i=[1,0,0,0,0,1,0,0,0,0,1,0,t,e,0,1];L2DMatrix44.mul(i,this.tr,this.tr)},L2DViewMatrix.prototype.adjustScale=function(t,e,i){var r=i*this.tr[0];r<this.min?this.tr[0]>0&&(i=this.min/this.tr[0]):r>this.max&&this.tr[0]>0&&(i=this.max/this.tr[0]);var o=[1,0,0,0,0,1,0,0,0,0,1,0,t,e,0,1],n=[i,0,0,0,0,i,0,0,0,0,1,0,0,0,0,1],s=[1,0,0,0,0,1,0,0,0,0,1,0,-t,-e,0,1];L2DMatrix44.mul(s,this.tr,this.tr),L2DMatrix44.mul(n,this.tr,this.tr),L2DMatrix44.mul(o,this.tr,this.tr)},L2DViewMatrix.prototype.setScreenRect=function(t,e,i,r){this.screenLeft=t,this.screenRight=e,this.screenTop=r,this.screenBottom=i},L2DViewMatrix.prototype.setMaxScreenRect=function(t,e,i,r){this.maxLeft=t,this.maxRight=e,this.maxTop=r,this.maxBottom=i},L2DViewMatrix.prototype.getScreenLeft=function(){return this.screenLeft},L2DViewMatrix.prototype.getScreenRight=function(){return this.screenRight},L2DViewMatrix.prototype.getScreenBottom=function(){return this.screenBottom},L2DViewMatrix.prototype.getScreenTop=function(){return this.screenTop},L2DViewMatrix.prototype.getMaxLeft=function(){return this.maxLeft},L2DViewMatrix.prototype.getMaxRight=function(){return this.maxRight},L2DViewMatrix.prototype.getMaxBottom=function(){return this.maxBottom},L2DViewMatrix.prototype.getMaxTop=function(){return this.maxTop},Live2DFramework.platformManager=null,Live2DFramework.getPlatformManager=function(){return Live2DFramework.platformManager},Live2DFramework.setPlatformManager=function(t){Live2DFramework.platformManager=t},MatrixStack.matrixStack=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],MatrixStack.depth=0,MatrixStack.currentMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],MatrixStack.tmp=new Array(16),MatrixStack.reset=function(){this.depth=0},MatrixStack.loadIdentity=function(){for(var t=0;t<16;t++)this.currentMatrix[t]=t%5==0?1:0},MatrixStack.push=function(){var t=(16*this.depth,16*(this.depth+1));this.matrixStack.length<t+16&&(this.matrixStack.length=t+16);for(var e=0;e<16;e++)this.matrixStack[t+e]=this.currentMatrix[e];this.depth++},MatrixStack.pop=function(){this.depth--,this.depth<0&&(myError("Invalid matrix stack."),this.depth=0);for(var t=16*this.depth,e=0;e<16;e++)this.currentMatrix[e]=this.matrixStack[t+e]},MatrixStack.getMatrix=function(){return this.currentMatrix},MatrixStack.multMatrix=function(t){var e,i,r;for(e=0;e<16;e++)this.tmp[e]=0;for(e=0;e<4;e++)for(i=0;i<4;i++)for(r=0;r<4;r++)this.tmp[e+4*i]+=this.currentMatrix[e+4*r]*t[r+4*i];for(e=0;e<16;e++)this.currentMatrix[e]=this.tmp[e]},ModelSettingJson.prototype.loadModelSetting=function(t,e){var i=this,r=Live2DFramework.getPlatformManager();r.loadBytes(t,function(t){var r=String.fromCharCode.apply(null,new Uint8Array(t));i.json=JSON.parse(r),e()})},ModelSettingJson.prototype.getTextureFile=function(t){return null==this.json[this.TEXTURES]||null==this.json[this.TEXTURES][t]?null:this.json[this.TEXTURES][t]},ModelSettingJson.prototype.getModelFile=function(){return this.json[this.MODEL]},ModelSettingJson.prototype.getTextureNum=function(){return null==this.json[this.TEXTURES]?0:this.json[this.TEXTURES].length},ModelSettingJson.prototype.getHitAreaNum=function(){return null==this.json[this.HIT_AREAS]?0:this.json[this.HIT_AREAS].length},ModelSettingJson.prototype.getHitAreaID=function(t){return null==this.json[this.HIT_AREAS]||null==this.json[this.HIT_AREAS][t]?null:this.json[this.HIT_AREAS][t][this.ID]},ModelSettingJson.prototype.getHitAreaName=function(t){return null==this.json[this.HIT_AREAS]||null==this.json[this.HIT_AREAS][t]?null:this.json[this.HIT_AREAS][t][this.NAME]},ModelSettingJson.prototype.getPhysicsFile=function(){return this.json[this.PHYSICS]},ModelSettingJson.prototype.getPoseFile=function(){return this.json[this.POSE]},ModelSettingJson.prototype.getExpressionNum=function(){return null==this.json[this.EXPRESSIONS]?0:this.json[this.EXPRESSIONS].length},ModelSettingJson.prototype.getExpressionFile=function(t){return null==this.json[this.EXPRESSIONS]?null:this.json[this.EXPRESSIONS][t][this.FILE]},ModelSettingJson.prototype.getExpressionName=function(t){return null==this.json[this.EXPRESSIONS]?null:this.json[this.EXPRESSIONS][t][this.NAME]},ModelSettingJson.prototype.getLayout=function(){return this.json[this.LAYOUT]},ModelSettingJson.prototype.getInitParamNum=function(){return null==this.json[this.INIT_PARAM]?0:this.json[this.INIT_PARAM].length},ModelSettingJson.prototype.getMotionNum=function(t){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][t]?0:this.json[this.MOTION_GROUPS][t].length},ModelSettingJson.prototype.getMotionFile=function(t,e){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][t]||null==this.json[this.MOTION_GROUPS][t][e]?null:this.json[this.MOTION_GROUPS][t][e][this.FILE]},ModelSettingJson.prototype.getMotionSound=function(t,e){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][t]||null==this.json[this.MOTION_GROUPS][t][e]||null==this.json[this.MOTION_GROUPS][t][e][this.SOUND]?null:this.json[this.MOTION_GROUPS][t][e][this.SOUND]},ModelSettingJson.prototype.getMotionFadeIn=function(t,e){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][t]||null==this.json[this.MOTION_GROUPS][t][e]||null==this.json[this.MOTION_GROUPS][t][e][this.FADE_IN]?1e3:this.json[this.MOTION_GROUPS][t][e][this.FADE_IN]},ModelSettingJson.prototype.getMotionFadeOut=function(t,e){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][t]||null==this.json[this.MOTION_GROUPS][t][e]||null==this.json[this.MOTION_GROUPS][t][e][this.FADE_OUT]?1e3:this.json[this.MOTION_GROUPS][t][e][this.FADE_OUT]},ModelSettingJson.prototype.getInitParamID=function(t){return null==this.json[this.INIT_PARAM]||null==this.json[this.INIT_PARAM][t]?null:this.json[this.INIT_PARAM][t][this.ID]},ModelSettingJson.prototype.getInitParamValue=function(t){return null==this.json[this.INIT_PARAM]||null==this.json[this.INIT_PARAM][t]?NaN:this.json[this.INIT_PARAM][t][this.VALUE]},ModelSettingJson.prototype.getInitPartsVisibleNum=function(){return null==this.json[this.INIT_PARTS_VISIBLE]?0:this.json[this.INIT_PARTS_VISIBLE].length},ModelSettingJson.prototype.getInitPartsVisibleID=function(t){return null==this.json[this.INIT_PARTS_VISIBLE]||null==this.json[this.INIT_PARTS_VISIBLE][t]?null:this.json[this.INIT_PARTS_VISIBLE][t][this.ID]},ModelSettingJson.prototype.getInitPartsVisibleValue=function(t){return null==this.json[this.INIT_PARTS_VISIBLE]||null==this.json[this.INIT_PARTS_VISIBLE][t]?NaN:this.json[this.INIT_PARTS_VISIBLE][t][this.VALUE]},PlatformManager.prototype.loadBytes=function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){switch(i.status){case 200:e(i.response);break;default:console.error("Failed to load ("+i.status+") : "+t)}},i.send(null)},PlatformManager.prototype.loadString=function(t){this.loadBytes(t,function(t){return t})},PlatformManager.prototype.loadLive2DModel=function(t,e){var i=null;this.loadBytes(t,function(t){i=Live2DModelWebGL.loadModel(t),e(i)})},PlatformManager.prototype.loadTexture=function(t,e,i,r){var o=new Image;o.src=i;o.onload=function(){var i=document.getElementById("glcanvas"),n=getWebGLContext(i,{premultipliedAlpha:!0}),s=n.createTexture();return s?(n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,1),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,s),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_NEAREST),n.generateMipmap(n.TEXTURE_2D),t.setTexture(e,s),s=null,void("function"==typeof r&&r())):(console.error("Failed to generate gl texture name."),-1)},o.onerror=function(){console.error("Failed to load image : "+i)}},PlatformManager.prototype.jsonParseFromBytes=function(t){var e,i=new Uint8Array(t,0,3);e=239==i[0]&&187==i[1]&&191==i[2]?String.fromCharCode.apply(null,new Uint8Array(t,3)):String.fromCharCode.apply(null,new Uint8Array(t));var r=JSON.parse(e);return r},PlatformManager.prototype.log=function(t){console.log(t)};var LAppDefine={DEBUG_LOG:!0,DEBUG_MOUSE_LOG:!1,VIEW_MAX_SCALE:2,VIEW_MIN_SCALE:.8,VIEW_LOGICAL_LEFT:-1,VIEW_LOGICAL_RIGHT:1,VIEW_LOGICAL_MAX_LEFT:-2,VIEW_LOGICAL_MAX_RIGHT:2,VIEW_LOGICAL_MAX_BOTTOM:2,VIEW_LOGICAL_MAX_TOP:2,PRIORITY_NONE:0,PRIORITY_IDLE:1,PRIORITY_NORMAL:2,PRIORITY_FORCE:3,BACK_IMAGE_NAME:"/live2d/assets/image/back_class_normal.png",MODEL:"/live2d/z16/z16.model.json",MOTION_GROUP_IDLE:"idle",MOTION_GROUP_TAP_BODY:"tap_body",MOTION_GROUP_FLICK_HEAD:"flick_head",MOTION_GROUP_PINCH_IN:"pinch_in",MOTION_GROUP_PINCH_OUT:"pinch_out",MOTION_GROUP_SHAKE:"shake",HIT_AREA_HEAD:"head",HIT_AREA_BODY:"body"};LAppModel.prototype=new L2DBaseModel,LAppModel.prototype.load=function(t,e,i){this.setUpdating(!0),this.setInitialized(!1),this.modelHomeDir=e.substring(0,e.lastIndexOf("/")+1),this.modelSetting=new ModelSettingJson;var r=this;this.modelSetting.loadModelSetting(e,function(){var e=r.modelHomeDir+r.modelSetting.getModelFile();r.loadModelData(e,function(e){for(var o=0;o<r.modelSetting.getTextureNum();o++){var n=r.modelHomeDir+r.modelSetting.getTextureFile(o);r.loadTexture(o,n,function(){if(r.isTexLoaded){if(r.modelSetting.getExpressionNum()>0){r.expressions={};for(var e=0;e<r.modelSetting.getExpressionNum();e++){var o=r.modelSetting.getExpressionName(e),n=r.modelHomeDir+r.modelSetting.getExpressionFile(e);r.loadExpression(o,n)}}else r.expressionManager=null,r.expressions={};if(null==r.eyeBlink&&(r.eyeBlink=new L2DEyeBlink),null!=r.modelSetting.getPhysicsFile()?r.loadPhysics(r.modelHomeDir+r.modelSetting.getPhysicsFile()):r.physics=null,null!=r.modelSetting.getPoseFile()?r.loadPose(r.modelHomeDir+r.modelSetting.getPoseFile(),function(){r.pose.updateParam(r.live2DModel)}):r.pose=null,null!=r.modelSetting.getLayout()){var s=r.modelSetting.getLayout();null!=s.width&&r.modelMatrix.setWidth(s.width),null!=s.height&&r.modelMatrix.setHeight(s.height),null!=s.x&&r.modelMatrix.setX(s.x),null!=s.y&&r.modelMatrix.setY(s.y),null!=s.center_x&&r.modelMatrix.centerX(s.center_x),null!=s.center_y&&r.modelMatrix.centerY(s.center_y),null!=s.top&&r.modelMatrix.top(s.top),null!=s.bottom&&r.modelMatrix.bottom(s.bottom),null!=s.left&&r.modelMatrix.left(s.left),null!=s.right&&r.modelMatrix.right(s.right)}for(var e=0;e<r.modelSetting.getInitParamNum();e++)r.live2DModel.setParamFloat(r.modelSetting.getInitParamID(e),r.modelSetting.getInitParamValue(e));for(var e=0;e<r.modelSetting.getInitPartsVisibleNum();e++)r.live2DModel.setPartsOpacity(r.modelSetting.getInitPartsVisibleID(e),r.modelSetting.getInitPartsVisibleValue(e));r.live2DModel.saveParam(),r.live2DModel.setGL(t),r.preloadMotionGroup(LAppDefine.MOTION_GROUP_IDLE),r.mainMotionManager.stopAllMotions(),r.setUpdating(!1),r.setInitialized(!0),"function"==typeof i&&i()}})}})})},LAppModel.prototype.release=function(t){var e=Live2DFramework.getPlatformManager();t.deleteTexture(e.texture)},LAppModel.prototype.preloadMotionGroup=function(t){for(var e=this,i=0;i<this.modelSetting.getMotionNum(t);i++){var r=this.modelSetting.getMotionFile(t,i);this.loadMotion(r,this.modelHomeDir+r,function(r){r.setFadeIn(e.modelSetting.getMotionFadeIn(t,i)),r.setFadeOut(e.modelSetting.getMotionFadeOut(t,i))})}},LAppModel.prototype.update=function(){if(null==this.live2DModel)return void(LAppDefine.DEBUG_LOG&&console.error("Failed to update."));var t=UtSystem.getUserTimeMSec()-this.startTimeMSec,e=t/1e3,i=2*e*Math.PI;this.mainMotionManager.isFinished()&&this.startRandomMotion(LAppDefine.MOTION_GROUP_IDLE,LAppDefine.PRIORITY_IDLE),this.live2DModel.loadParam();var r=this.mainMotionManager.updateParam(this.live2DModel);r||null!=this.eyeBlink&&this.eyeBlink.updateParam(this.live2DModel),this.live2DModel.saveParam(),null==this.expressionManager||null==this.expressions||this.expressionManager.isFinished()||this.expressionManager.updateParam(this.live2DModel),this.live2DModel.addToParamFloat("PARAM_ANGLE_X",30*this.dragX,1),this.live2DModel.addToParamFloat("PARAM_ANGLE_Y",30*this.dragY,1),this.live2DModel.addToParamFloat("PARAM_ANGLE_Z",this.dragX*this.dragY*-30,1),this.live2DModel.addToParamFloat("PARAM_BODY_ANGLE_X",10*this.dragX,1),this.live2DModel.addToParamFloat("PARAM_EYE_BALL_X",this.dragX,1),this.live2DModel.addToParamFloat("PARAM_EYE_BALL_Y",this.dragY,1),this.live2DModel.addToParamFloat("PARAM_ANGLE_X",Number(15*Math.sin(i/6.5345)),.5),this.live2DModel.addToParamFloat("PARAM_ANGLE_Y",Number(8*Math.sin(i/3.5345)),.5),this.live2DModel.addToParamFloat("PARAM_ANGLE_Z",Number(10*Math.sin(i/5.5345)),.5),this.live2DModel.addToParamFloat("PARAM_BODY_ANGLE_X",Number(4*Math.sin(i/15.5345)),.5),this.live2DModel.setParamFloat("PARAM_BREATH",Number(.5+.5*Math.sin(i/3.2345)),1),null!=this.physics&&this.physics.updateParam(this.live2DModel),null==this.lipSync&&this.live2DModel.setParamFloat("PARAM_MOUTH_OPEN_Y",this.lipSyncValue),null!=this.pose&&this.pose.updateParam(this.live2DModel),this.live2DModel.update()},LAppModel.prototype.setRandomExpression=function(){var t=[];for(var e in this.expressions)t.push(e);
var i=parseInt(Math.random()*t.length);this.setExpression(t[i])},LAppModel.prototype.startRandomMotion=function(t,e){var i=this.modelSetting.getMotionNum(t),r=parseInt(Math.random()*i);this.startMotion(t,r,e)},LAppModel.prototype.startMotion=function(t,e,i){var r=this.modelSetting.getMotionFile(t,e);if(null==r||""==r)return void(LAppDefine.DEBUG_LOG&&console.error("Failed to motion."));if(i==LAppDefine.PRIORITY_FORCE)this.mainMotionManager.setReservePriority(i);else if(!this.mainMotionManager.reserveMotion(i))return void(LAppDefine.DEBUG_LOG&&console.log("Motion is running."));var o,n=this;null==this.motions[t]?this.loadMotion(null,this.modelHomeDir+r,function(r){o=r,n.setFadeInFadeOut(t,e,i,o)}):(o=this.motions[t],n.setFadeInFadeOut(t,e,i,o))},LAppModel.prototype.setFadeInFadeOut=function(t,e,i,r){var o=this.modelSetting.getMotionFile(t,e);if(r.setFadeIn(this.modelSetting.getMotionFadeIn(t,e)),r.setFadeOut(this.modelSetting.getMotionFadeOut(t,e)),LAppDefine.DEBUG_LOG&&console.log("Start motion : "+o),null==this.modelSetting.getMotionSound(t,e))this.mainMotionManager.startMotionPrio(r,i);else{var n=this.modelSetting.getMotionSound(t,e),s=document.createElement("audio");s.src=this.modelHomeDir+n,LAppDefine.DEBUG_LOG&&console.log("Start sound : "+n),s.play(),this.mainMotionManager.startMotionPrio(r,i)}},LAppModel.prototype.setExpression=function(t){var e=this.expressions[t];LAppDefine.DEBUG_LOG&&console.log("Expression : "+t),this.expressionManager.startMotion(e,!1)},LAppModel.prototype.draw=function(t){MatrixStack.push(),MatrixStack.multMatrix(this.modelMatrix.getArray()),this.tmpMatrix=MatrixStack.getMatrix(),this.live2DModel.setMatrix(this.tmpMatrix),this.live2DModel.draw(),MatrixStack.pop()},LAppModel.prototype.hitTest=function(t,e,i){for(var r=this.modelSetting.getHitAreaNum(),o=0;o<r;o++)if(t==this.modelSetting.getHitAreaName(o)){var n=this.modelSetting.getHitAreaID(o);return this.hitTestSimple(n,e,i)}return!1},LAppLive2DManager.prototype.createModel=function(){var t=new LAppModel;return this.models.push(t),t},LAppLive2DManager.prototype.changeModel=function(t){if(this.reloadFlg){this.reloadFlg=!1;var e=parseInt(this.count%5),i=this;switch(e){case 0:this.releaseModel(1,t),this.releaseModel(0,t),this.createModel(),this.models[0].load(t,LAppDefine.MODEL_HARU);break;case 1:this.releaseModel(0,t),this.createModel(),this.models[0].load(t,LAppDefine.MODEL);break;case 2:this.releaseModel(0,t),this.createModel(),this.models[0].load(t,LAppDefine.MODEL_WANKO);break;case 3:this.releaseModel(0,t),this.createModel(),this.models[0].load(t,LAppDefine.MODEL_HARU_A,function(){i.createModel(),i.models[1].load(t,LAppDefine.MODEL_HARU_B)});break;case 4:this.releaseModel(0,t),this.createModel(),this.models[0].load(t,LAppDefine.MODEL_MIKU)}}},LAppLive2DManager.prototype.getModel=function(t){return t>=this.models.length?null:this.models[t]},LAppLive2DManager.prototype.releaseModel=function(t,e){this.models.length<=t||(this.models[t].release(e),delete this.models[t],this.models.splice(t,1))},LAppLive2DManager.prototype.numModels=function(){return this.models.length},LAppLive2DManager.prototype.setDrag=function(t,e){for(var i=0;i<this.models.length;i++)this.models[i].setDrag(t,e)},LAppLive2DManager.prototype.maxScaleEvent=function(){LAppDefine.DEBUG_LOG&&console.log("Max scale event.");for(var t=0;t<this.models.length;t++)this.models[t].startRandomMotion(LAppDefine.MOTION_GROUP_PINCH_IN,LAppDefine.PRIORITY_NORMAL)},LAppLive2DManager.prototype.minScaleEvent=function(){LAppDefine.DEBUG_LOG&&console.log("Min scale event.");for(var t=0;t<this.models.length;t++)this.models[t].startRandomMotion(LAppDefine.MOTION_GROUP_PINCH_OUT,LAppDefine.PRIORITY_NORMAL)},LAppLive2DManager.prototype.tapEvent=function(t,e){LAppDefine.DEBUG_LOG&&console.log("tapEvent view x:"+t+" y:"+e);for(var i=0;i<this.models.length;i++)this.models[i].hitTest(LAppDefine.HIT_AREA_HEAD,t,e)?(LAppDefine.DEBUG_LOG&&console.log("Tap face."),this.models[i].setRandomExpression()):this.models[i].hitTest(LAppDefine.HIT_AREA_BODY,t,e)&&(LAppDefine.DEBUG_LOG&&console.log("Tap body. models["+i+"]"),this.models[i].startRandomMotion(LAppDefine.MOTION_GROUP_TAP_BODY,LAppDefine.PRIORITY_NORMAL));return!0},console.log("live2d loading...");var thisRef=this,live2dCanveId="";window.onerror=function(t,e,i,r,o){var n="file:"+e+"<br>line:"+i+" "+t;l2dError(n)};